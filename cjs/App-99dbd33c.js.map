{"version":3,"file":"App-99dbd33c.js","sources":["../src/redux/store/history.js","../src/redux/sagas/navigation.js","../src/util/schema.ts","../src/routing/util/expressions.ts","../src/routing/util/queries.ts","../src/routing/redux/sagas.js","../src/user/redux/sagas/register.js","../src/user/util/userHelper.js","../src/user/redux/sagas/resetPassword.js","../src/user/redux/sagas/index.ts","../src/redux/sagas/index.js","../src/util/pickProject.js","../src/app/App.tsx"],"sourcesContent":["import { createBrowserHistory, createMemoryHistory } from 'history';\n\n// Create a history depending on the environment\nconst selectedHistory =\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\n\nexport const history = (options = {}) => selectedHistory(options);\nexport const browserHistory = selectedHistory();\n","import { takeEvery, put, select } from 'redux-saga/effects';\nimport * as log from 'loglevel';\n\nimport {\n  GET_NODE_TREE,\n  SET_NODE_TREE,\n  GET_NODE_TREE_ERROR,\n} from '~/redux/types/navigation';\nimport { hasNavigationTree } from '~/redux/selectors/navigation';\n\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\n\nexport function* ensureNodeTreeSaga(action) {\n  const { api, language, project, versionStatus, treeDepth } = action;\n  const state = yield select();\n  try {\n    if (!hasNavigationTree(state)) {\n      const nodes = yield api.getRootNode(\n        {\n          depth: treeDepth || 0,\n          language,\n        },\n        versionStatus,\n        project\n      );\n      if (nodes) {\n        yield put({ type: SET_NODE_TREE, nodes });\n      } else {\n        yield put({ type: GET_NODE_TREE_ERROR });\n      }\n    }\n  } catch (ex) {\n    log.error(...['Error running ensureNodeTreeSaga:', ex]);\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\n  }\n}\n","export const DataFormats = {\n  entry: 'entry',\n  webpage: 'webpage',\n};\n\nconst sys = {\n  contentTypeId: 'sys.contentTypeId',\n  dataFormat: 'sys.dataFormat',\n  filename: 'sys.properties.filename',\n  id: 'sys.id',\n  includeInSearch: 'sys.metadata.includeInSearch',\n  slug: 'sys.slug',\n  uri: 'sys.uri',\n  versionStatus: 'sys.versionStatus',\n};\n\nexport const Fields = {\n  entryTitle: 'entryTitle',\n  entryDescription: 'entryDescription',\n  keywords: 'keywords',\n  sys,\n  contentTypeId: 'sys.contentTypeId',\n  wildcard: '*',\n};\n\nexport const VersionStatus = {\n  published: 'published',\n  latest: 'latest',\n};\n","import { IExpression } from 'contensis-core-api';\nimport { Op } from 'contensis-delivery-api';\nimport { Fields } from '~/util/schema';\n\nexport const fieldExpression = (\n  field: string,\n  value: string | string[],\n  operator = 'equalTo',\n  weight = null\n) => {\n  if (!field || !value) return [];\n  if (Array.isArray(value)) return equalToOrIn(field, value, operator);\n  else\n    return !weight\n      ? [Op[operator](field, value)]\n      : [Op[operator](field, value).weight(weight)];\n};\n\nexport const defaultExpressions = (\n  versionStatus: 'published' | 'latest'\n): IExpression[] => {\n  return [Op.equalTo(Fields.sys.versionStatus, versionStatus)];\n};\n\nconst equalToOrIn = (field: string, arr: string[], operator = 'equalTo') =>\n  arr.length === 0\n    ? []\n    : arr.length === 1\n    ? [Op[operator](field, arr[0])]\n    : [Op.in(field, ...arr)];\n","import { FieldLinkDepths, VersionStatus } from 'contensis-core-api';\nimport { Query } from 'contensis-delivery-api';\nimport { fieldExpression, defaultExpressions } from './expressions';\n\nexport const routeEntryByFieldsQuery = (\n  id: string,\n  language = 'en-GB',\n  fields: string[] = [],\n  fieldLinkDepths: FieldLinkDepths,\n  versionStatus: VersionStatus = 'published'\n) => {\n  const query = new Query(\n    ...[\n      ...fieldExpression('sys.id', id),\n      ...fieldExpression('sys.language', language),\n      ...defaultExpressions(versionStatus),\n    ]\n  );\n  query.fields = fields;\n  query.fieldLinkDepths = fieldLinkDepths;\n  return query;\n};\n","import to from 'await-to-js';\nimport * as log from 'loglevel';\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\n\nimport {\n  SET_ENTRY,\n  SET_ANCESTORS,\n  SET_NAVIGATION_PATH,\n  SET_ROUTE,\n  SET_SIBLINGS,\n  UPDATE_LOADING_STATE,\n} from './types';\nimport { GET_NODE_TREE } from '~/redux/types/navigation';\nimport {\n  selectCurrentAncestors,\n  selectCurrentNode,\n  selectCurrentProject,\n  selectCurrentSiblings,\n  selectMappedEntry,\n  selectRouteEntry,\n  selectRouteEntryEntryId,\n  selectRouteEntryLanguage,\n} from './selectors';\nimport { hasNavigationTree } from '~/redux/selectors/navigation';\nimport { selectVersionStatus } from '~/redux/selectors/version';\nimport { handleRequiresLoginSaga } from '~/user/redux/sagas/login';\nimport { ensureNodeTreeSaga } from '~/redux/sagas/navigation';\nimport { injectRedux as reduxInjector } from '~/redux/store/injectors';\n\nimport { LoginHelper } from '~/user';\nimport { findContentTypeMapping } from '../util/find-contenttype-mapping';\nimport { routeEntryByFieldsQuery } from '../util/queries';\n\nexport const routingSagas = [\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\n  takeEvery(SET_ROUTE, setRouteSaga),\n];\n\n/**\n * To navigate / push a specific route via redux middleware\n * @param {path, state} action\n */\nfunction* setRouteSaga(action) {\n  yield put({\n    type: 'CALL_HISTORY_METHOD',\n    payload: {\n      method: 'push',\n      args: [action.path, action.state],\n    },\n  });\n}\n\nfunction* getRouteSaga(action) {\n  let entry = null;\n  try {\n    const {\n      withEvents,\n      routes: { ContentTypeMappings = {} } = {},\n      staticRoute,\n      // get api instance from ssr context that is connected to the specific request in ssr\n      ssr: { api },\n    } = action;\n\n    // Inject redux { key, reducer, saga } provided by staticRoute\n    if (staticRoute && staticRoute.route.injectRedux)\n      yield call(reduxInjectorSaga, staticRoute.route.injectRedux);\n\n    // Variables we will pass to setRouteEntry\n    let pathNode = null,\n      ancestors = null,\n      children = [],\n      siblings = null;\n\n    let contentTypeMapping = {};\n\n    // These variables are the return values from\n    // calls to withEvents.onRouteLoad and onRouteLoaded\n    let appsays,\n      requireLogin = false;\n\n    if (withEvents && withEvents.onRouteLoad) {\n      appsays = yield withEvents.onRouteLoad(action);\n    }\n\n    const staticRouteLinkDepth = staticRoute?.route?.params?.linkDepth;\n    const staticRouteFields = staticRoute?.route?.params?.fields;\n    const staticRouteFieldLinkDepths =\n      staticRoute?.route?.params?.fieldLinkDepths;\n    const entryLinkDepth =\n      appsays && appsays.entryLinkDepth !== undefined\n        ? appsays.entryLinkDepth\n        : 2;\n    const entryFieldLinkDepths = appsays?.entryFieldLinkDepths;\n    const setContentTypeLimits =\n      (typeof staticRouteLinkDepth === 'undefined' || !staticRouteFields) &&\n      !!ContentTypeMappings.find(\n        ct => ct.fields || ct.linkDepth || ct.nodeOptions || ct.fieldLinkDepths\n      );\n\n    const state = yield select();\n    const routeEntry = selectRouteEntry(state, 'js');\n    const routeNode = selectCurrentNode(state, 'js');\n    const currentPath = action.path; //selectCurrentPath(state);\n    const deliveryApiStatus = selectVersionStatus(state);\n    const project = selectCurrentProject(state);\n    // const isHome = currentPath === '/';\n    const isPreview = currentPath && currentPath.startsWith('/preview/');\n    const defaultLang = (appsays && appsays.defaultLang) || 'en-GB';\n\n    if (\n      !isPreview &&\n      (appsays?.customRouting ||\n        (staticRoute && !staticRoute.route.fetchNode) ||\n        (routeEntry &&\n          action.statePath === action.path &&\n          appsays?.refetchNode !== true))\n    ) {\n      // To prevent erroneous 404s and wasted network calls, this covers\n      // - appsays customRouting and does SET_ENTRY etc. via the consuming app\n      // - all staticRoutes (where custom 'route.fetchNode' attribute is falsey)\n      // - standard Contensis SiteView Routing where we already have that entry in state\n      if (routeEntry && (!staticRoute || staticRoute?.route?.fetchNode)) {\n        pathNode = { ...routeNode, entry: null };\n        pathNode.entry = entry = routeEntry;\n        //Do nothing, the entry is allready the right one.\n        // yield put({\n        //   type: SET_ENTRY,\n        //   entry,\n        //   node: routeNode,\n        //   isLoading: false,\n        // });\n        yield put({\n          type: UPDATE_LOADING_STATE,\n          isLoading: false,\n        });\n      } else\n        yield call(\n          setRouteEntry,\n          currentPath,\n          routeEntry,\n          yield select(selectCurrentNode),\n          yield select(selectCurrentAncestors),\n          yield select(selectCurrentSiblings)\n        );\n    } else {\n      // Handle preview routes\n      if (isPreview) {\n        let splitPath = currentPath.split('/');\n        let entryGuid = splitPath[2];\n        let language = defaultLang;\n        if (splitPath.length >= 3) {\n          //set lang key if available in the path, else use default lang\n          //assumes preview url on content type is: http://preview.ALIAS.contensis.cloud/preview/{GUID}/{LANG}\n          if (splitPath.length == 4) language = splitPath[3];\n          // According to product dev we cannot use Node API\n          // for previewing entries as it gives a response of []\n          // -- apparently it is not correct to request latest content\n          // with Node API\n\n          let previewEntry = yield api\n            .getClient(deliveryApiStatus, project)\n            .entries.get({\n              id: entryGuid,\n              language,\n              linkDepth: entryLinkDepth,\n            });\n          if (previewEntry) {\n            pathNode = { entry: previewEntry };\n            ({ entry } = pathNode || {});\n          }\n        }\n      } else {\n        // Handle all other routes\n        let nodeError = undefined;\n        [nodeError, pathNode] = yield to(\n          api.getNode(\n            {\n              depth: 0,\n              path: currentPath,\n              entryFields:\n                staticRouteFields ||\n                (setContentTypeLimits ? ['sys.contentTypeId', 'sys.id'] : '*'),\n              entryLinkDepth:\n                typeof staticRouteLinkDepth !== 'undefined'\n                  ? staticRouteLinkDepth\n                  : entryLinkDepth || 0,\n              entryFieldLinkDepths:\n                staticRouteFieldLinkDepths ||\n                (!setContentTypeLimits ? entryFieldLinkDepths : undefined),\n              language: defaultLang,\n              versionStatus: deliveryApiStatus,\n            },\n            project\n          )\n        );\n        if (nodeError) {\n          if ([401, 403].includes(nodeError.status)) {\n            // Capture specific auth errors with the delivery api\n            // and fire the user down the handleRequiresLoginSaga\n            // If auth was successful via a refreshToken we need to reload the page\n            // to run this getRouteSaga again with the security token cookie\n            const userLoggedIn = yield call(handleRequiresLoginSaga, {\n              ...action,\n              requireLogin: true,\n            });\n            if (userLoggedIn && nodeError.status === 401) {\n              // Reload the route so we can re-run the routing request now the\n              // authentication cookies are written\n              return yield call(setRouteSaga, { path: currentPath });\n            } else if (userLoggedIn && nodeError.status === 403) {\n              return yield call(setRouteSaga, {\n                path: LoginHelper.GetAccessDeniedRoute(currentPath),\n              });\n            } else {\n              return yield call(do500, nodeError);\n            }\n          } else throw nodeError;\n        } else ({ entry } = pathNode || {});\n\n        if (setContentTypeLimits && pathNode?.entry?.sys?.id) {\n          // Get fields[] and linkDepth from ContentTypeMapping to get the entry data\n          // and current node's ordinates at a specified depth with specified fields\n          contentTypeMapping =\n            findContentTypeMapping(\n              ContentTypeMappings,\n              pathNode.entry.sys.contentTypeId\n            ) || {};\n          const { fieldLinkDepths, fields, linkDepth } = contentTypeMapping;\n          const query = routeEntryByFieldsQuery(\n            pathNode.entry.sys.id,\n            pathNode.entry.sys.language,\n            fields,\n            fieldLinkDepths,\n            deliveryApiStatus\n          );\n          const payload = yield api.search(\n            query,\n            typeof linkDepth !== 'undefined' ? linkDepth : entryLinkDepth || 0,\n            project\n          );\n          if (payload?.items?.length > 0) {\n            pathNode.entry = entry = payload.items[0];\n          }\n        }\n      }\n\n      // make calls to fetch node ancestors, children,\n      // siblings or entire node tree\n      [ancestors, children, siblings] = yield call(\n        resolveCurrentNodeOrdinates,\n        {\n          api,\n          appsays,\n          contentTypeMapping,\n          language: defaultLang,\n          path: currentPath,\n          pathNode,\n          project,\n          versionStatus: deliveryApiStatus,\n        }\n      );\n\n      if (children) pathNode.children = children;\n    }\n\n    const resolvedContentTypeMapping =\n      findContentTypeMapping(\n        ContentTypeMappings,\n        pathNode?.entry?.sys?.contentTypeId\n      ) || {};\n\n    // Inject redux { key, reducer, saga } provided by ContentTypeMapping\n    if (resolvedContentTypeMapping.injectRedux)\n      yield call(reduxInjectorSaga, resolvedContentTypeMapping.injectRedux);\n\n    if (withEvents && withEvents.onRouteLoaded) {\n      // Check if the app has provided a requireLogin boolean flag or groups array\n      // in addition to checking if requireLogin is set in the route definition\n      ({ requireLogin } =\n        (yield withEvents.onRouteLoaded({ ...action, entry })) || {});\n    }\n\n    if (requireLogin !== false) {\n      // Do not call the login feature saga if requireLogin is false\n      yield call(handleRequiresLoginSaga, {\n        ...action,\n        entry,\n        requireLogin,\n      });\n    }\n\n    if (!appsays || !appsays.preventScrollTop) {\n      // Scroll into View\n      if (typeof window !== 'undefined') window.scrollTo(0, 0);\n    }\n\n    if (pathNode?.entry?.sys?.id) {\n      entry = pathNode.entry;\n\n      yield call(\n        setRouteEntry,\n        currentPath,\n        entry,\n        pathNode,\n        ancestors,\n        siblings,\n        staticRoute?.route?.fetchNode?.entryMapper ||\n          resolvedContentTypeMapping.entryMapper,\n        false,\n        appsays?.refetchNode\n      );\n    } else {\n      if (staticRoute)\n        yield call(\n          setRouteEntry,\n          currentPath,\n          null,\n          pathNode,\n          ancestors,\n          siblings\n        );\n      else yield call(do404);\n    }\n  } catch (e) {\n    log.error(...['Error running route saga:', e, e.stack]);\n    yield call(do500, e);\n  }\n}\n\nfunction* resolveCurrentNodeOrdinates(action) {\n  const {\n    api,\n    appsays,\n    contentTypeMapping,\n    language,\n    path,\n    pathNode,\n    project,\n    versionStatus,\n  } = action;\n  const apiCall = [() => null, () => null, () => null, () => null];\n\n  // if appsays customNavigation: true, we will set doNavigation to false\n  // if appsays customNavigation: { ... }, we will set doNavigation to the customNavigation object and check for child elements\n  // if appsays nothing we will set doNavigation to true and continue to do navigation calls\n  const doNavigation =\n    !appsays ||\n    (appsays?.customNavigation === true\n      ? false\n      : appsays?.customNavigation || true);\n\n  const {\n    entryLinkDepth = 0,\n    fieldLinkDepths,\n    fields,\n    linkDepth,\n    nodeOptions = {},\n  } = contentTypeMapping;\n\n  if (pathNode && pathNode.id) {\n    if (doNavigation === true || doNavigation.ancestors) {\n      apiCall[0] = function* getAncestors() {\n        try {\n          return yield api.getAncestors(\n            {\n              id: pathNode.id,\n              language,\n              versionStatus,\n            },\n            project\n          );\n        } catch (ex) {\n          log.info('Problem fetching ancestors', ex);\n          return [];\n        }\n      };\n    }\n\n    const childrenDepth =\n      doNavigation === true || doNavigation.children === true\n        ? 1\n        : (doNavigation && doNavigation.children) || 0;\n\n    if (\n      (typeof nodeOptions?.children === 'undefined' && childrenDepth > 0) ||\n      nodeOptions.children\n    ) {\n      const childrenOptions =\n        !nodeOptions.children || typeof nodeOptions.children === 'boolean'\n          ? {}\n          : nodeOptions.children;\n      apiCall[1] = function* getChildren() {\n        try {\n          return yield api.getNode(\n            {\n              depth:\n                childrenOptions.depth !== undefined\n                  ? childrenOptions.depth\n                  : childrenDepth,\n              path,\n              entryFieldLinkDepths:\n                childrenOptions.fieldLinkDepths || fieldLinkDepths,\n              entryFields: childrenOptions.fields || fields || undefined,\n              entryLinkDepth:\n                typeof childrenOptions.linkDepth !== 'undefined'\n                  ? childrenOptions.linkDepth\n                  : typeof linkDepth !== 'undefined'\n                  ? linkDepth\n                  : entryLinkDepth,\n              language,\n              versionStatus,\n            },\n            project\n          );\n        } catch (ex) {\n          log.info('Problem fetching children', ex);\n          return [];\n        }\n      };\n    }\n\n    if (\n      (typeof nodeOptions?.siblings === 'undefined' && doNavigation.siblings) ||\n      nodeOptions.siblings\n    ) {\n      apiCall[2] = function* getSiblings() {\n        try {\n          return yield api.getSiblings(\n            {\n              id: pathNode.id,\n              entryFieldLinkDepths:\n                nodeOptions?.siblings?.fieldLinkDepths || fieldLinkDepths,\n              entryFields: nodeOptions?.siblings?.fields || fields || undefined,\n              entryLinkDepth:\n                typeof nodeOptions?.siblings?.linkDepth !== 'undefined'\n                  ? nodeOptions.siblings.linkDepth\n                  : typeof linkDepth !== 'undefined'\n                  ? linkDepth\n                  : entryLinkDepth,\n              includeInMenu: true,\n              language,\n              versionStatus,\n            },\n            project\n          );\n        } catch (ex) {\n          log.info('Problem fetching siblings', ex);\n          return [];\n        }\n      };\n    }\n  }\n\n  const isTreeLoaded = yield select(hasNavigationTree);\n  if (!isTreeLoaded && (doNavigation === true || doNavigation.tree))\n    apiCall[3] = function* getNodeTree() {\n      const treeDepth =\n        doNavigation === true ||\n        !doNavigation.tree ||\n        doNavigation.tree === true\n          ? 2\n          : doNavigation.tree;\n\n      if (typeof window !== 'undefined') {\n        return yield put({\n          type: GET_NODE_TREE,\n          ...action,\n          treeDepth,\n        });\n      } else {\n        return yield call(ensureNodeTreeSaga, { ...action, treeDepth });\n      }\n    };\n\n  const [loadAncestors, loadChildren, loadSiblings, loadTree] = apiCall;\n  const [ancestors, nodeWithChildren, siblings] = yield all([\n    loadAncestors(),\n    loadChildren(),\n    loadSiblings(),\n    loadTree(),\n  ]);\n  return [ancestors, nodeWithChildren?.children, siblings];\n}\n\nfunction* setRouteEntry(\n  currentPath,\n  entry,\n  node,\n  ancestors,\n  siblings,\n  entryMapper,\n  notFound = false,\n  remapEntry = false\n) {\n  const entrySys = (entry && entry.sys) || {};\n\n  // Update a window global to provide the preview toolbar\n  // an updated entry id in client-side navigation\n  if (typeof window !== 'undefined') window.ContensisEntryId = entrySys.id;\n\n  const currentEntryId = yield select(selectRouteEntryEntryId);\n  const currentEntryLang = yield select(selectRouteEntryLanguage);\n  const mappedEntry =\n    currentEntryId === entrySys.id &&\n    currentEntryLang === entrySys.language &&\n    remapEntry === false\n      ? (yield select(selectMappedEntry, 'js')) || {}\n      : yield mapRouteEntry(entryMapper, {\n          ...node,\n          entry,\n          ancestors,\n          siblings,\n        });\n\n  yield all([\n    put({\n      type: SET_ENTRY,\n      id: entrySys.id,\n      currentPath,\n      entry,\n      mappedEntry,\n      node,\n      notFound,\n    }),\n    ancestors &&\n      put({\n        type: SET_ANCESTORS,\n        ancestors,\n      }),\n    siblings &&\n      put({\n        type: SET_SIBLINGS,\n        siblings,\n      }),\n  ]);\n}\n\nfunction* mapRouteEntry(entryMapper, node) {\n  try {\n    if (typeof entryMapper === 'function') {\n      const state = yield select();\n      const mappedEntry = yield call(entryMapper, node, state);\n      return mappedEntry;\n    }\n  } catch (e) {\n    log.error(...['Error running entryMapper:', e, e.stack]);\n  }\n  return;\n}\n\nfunction* do404() {\n  yield call(clientReloadHitServer);\n  yield put({\n    type: SET_ENTRY,\n    id: null,\n    entry: null,\n    notFound: true,\n  });\n}\n\nfunction* clientReloadHitServer() {\n  const stateEntry = yield select(selectRouteEntry);\n\n  // If in client and there is a stateEntry.sys field reload the page,\n  // on the 2nd load stateEntry.sys should be null at this point,\n  // we do not wish to reload again and get stuck in an infinite reloading loop\n  if (typeof window !== 'undefined' && (stateEntry?.sys || null)) {\n    window.location.reload();\n  }\n}\n\nfunction* do500(error) {\n  yield put({\n    type: SET_ENTRY,\n    id: null,\n    entry: null,\n    notFound: true,\n    isError: true,\n    error,\n    statusCode: error && error.status ? error.status : 500,\n  });\n}\n\nfunction* reduxInjectorSaga(injectorFn) {\n  if (typeof injectorFn === 'function') {\n    const { key, reducer, saga } = yield injectorFn();\n    reduxInjector({ key, reducer, saga });\n  }\n}\n","import { to } from 'await-to-js';\nimport { put, select, takeEvery } from 'redux-saga/effects';\nimport { setRoute } from '~/routing/redux/actions';\nimport { selectCurrentSearch } from '~/routing/redux/selectors';\nimport { queryParams } from '~/util/navigation';\nimport {\n  REGISTER_USER,\n  REGISTER_USER_SUCCESS,\n  REGISTER_USER_FAILED,\n} from '../types';\n\nexport const registerSagas = [\n  takeEvery(REGISTER_USER, registerSaga),\n  takeEvery(REGISTER_USER_SUCCESS, redirectSaga),\n];\n\nfunction* registerSaga({ user, mappers }) {\n  let requestBody = user;\n  // Allow use of request mapper to take a user object\n  // of any format and return the payload for the api request\n  if (mappers && mappers.request && typeof mappers.request === 'function') {\n    requestBody = yield mappers.request(user);\n  }\n\n  // Make POST call to register API\n  const response = yield fetch('/account/register', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(requestBody),\n  });\n\n  if (response.ok) {\n    let mappedResponse;\n    const [, responseBody] = yield to(response.json());\n    if (responseBody) {\n      // Allow use of response mapper to convert the successful user object\n      // from the api response body into a user object of any format\n      if (\n        mappers &&\n        mappers.response &&\n        typeof mappers.response === 'function'\n      ) {\n        mappedResponse = yield mappers.response(responseBody);\n      }\n      // Update user object with mappedResponse or responseBody\n      yield put({\n        type: REGISTER_USER_SUCCESS,\n        user: mappedResponse || responseBody,\n      });\n    } else {\n      // OK response but unable to parse the response body\n      yield put({\n        type: REGISTER_USER_FAILED,\n        error: {\n          message:\n            'Unable to parse the created user from the register service response',\n        },\n      });\n    }\n  } else {\n    // Not OK responses, these can be due to service availability\n    // or status codes echoed from the responses received from\n    // management api when registering the user\n    const [, errorResponse] = yield to(response.json());\n    const error = (errorResponse && errorResponse.error) || errorResponse || {};\n    // Get something meaningful from the response if there is no message in the body\n    if (!error.message) {\n      error.message = `Registration service: ${response.statusText}`;\n      error.status = response.status;\n    }\n    yield put({\n      type: REGISTER_USER_FAILED,\n      error,\n    });\n  }\n}\n\nfunction* redirectSaga() {\n  // Check if querystring contains a redirect_uri\n  const currentQs = queryParams(yield select(selectCurrentSearch));\n  const redirectUri = currentQs.redirect_uri || currentQs.redirect;\n\n  // We must use redux based navigation to preserve the registration state\n  if (redirectUri) yield put(setRoute(redirectUri));\n}\n","const PAP_URL = 'https://pap.zengenti.com';\n\nconst USER_ENVS_URI = 'my-environments';\nconst USER_RESEND_VERIFICATION_URI = 'account/verify/resend';\nconst USER_REQUEST_PASSWORD_RESET_URI = 'account/reset';\nconst USER_RESET_PASSWORD_URI = 'account/reset/password';\n\nconst USER_ENVS_URL = `${PAP_URL}/${USER_ENVS_URI}`;\n\nconst BASE_OPTIONS = {\n  method: 'GET',\n  headers: { 'Content-Type': 'application/json' },\n};\n\nexport class UserHelper {\n  static async GetUsersEnvironments(securityToken) {\n    const options = {\n      ...BASE_OPTIONS,\n      headers: {\n        'x-security-token': securityToken,\n      },\n    };\n    return await UserHelper.get(USER_ENVS_URL, options);\n  }\n  static async ResendUserVerification(userEmail) {\n    const options = {\n      ...BASE_OPTIONS,\n    };\n    return await UserHelper.get(\n      `/${USER_RESEND_VERIFICATION_URI}?user=${userEmail}`,\n      options\n    );\n  }\n  static async RequestPasswordReset(userEmailObject) {\n    const options = {\n      ...BASE_OPTIONS,\n      body: JSON.stringify(userEmailObject),\n    };\n    options.method = 'POST';\n\n    return await UserHelper.get(`/${USER_REQUEST_PASSWORD_RESET_URI}`, options);\n  }\n  static async ResetPassword(resetPasswordObject) {\n    const options = {\n      ...BASE_OPTIONS,\n      body: JSON.stringify(resetPasswordObject),\n    };\n    options.method = 'POST';\n\n    return await UserHelper.get(`/${USER_RESET_PASSWORD_URI}`, options);\n  }\n\n  static async get(url, options = BASE_OPTIONS) {\n    try {\n      const responseBody = await api(url, options);\n      return responseBody;\n    } catch (err) {\n      return { error: { message: err.message } };\n    }\n  }\n}\n\nasync function api(url, options) {\n  return fetch(url, options)\n    .then(async response => {\n      return response.json().then(data => data);\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n","import { put, takeEvery, select } from 'redux-saga/effects';\nimport { to } from 'await-to-js';\nimport { getManagementApiClient } from '~/user/util/ContensisManagementApi';\nimport { UserHelper } from '~/user/util/userHelper';\nimport { selectClientCredentials } from '../selectors';\nimport {\n  REQUEST_USER_PASSWORD_RESET,\n  RESET_USER_PASSWORD,\n  REQUEST_USER_PASSWORD_RESET_ERROR,\n  REQUEST_USER_PASSWORD_RESET_SENDING,\n  REQUEST_USER_PASSWORD_RESET_SUCCESS,\n  RESET_USER_PASSWORD_ERROR,\n  RESET_USER_PASSWORD_SENDING,\n  RESET_USER_PASSWORD_SUCCESS,\n  CHANGE_USER_PASSWORD,\n  CHANGE_USER_PASSWORD_SENDING,\n  CHANGE_USER_PASSWORD_SUCCESS,\n  CHANGE_USER_PASSWORD_ERROR,\n} from '../types';\n\nexport const resetPasswordSagas = [\n  takeEvery(REQUEST_USER_PASSWORD_RESET, requestPasswordResetSaga),\n  takeEvery(RESET_USER_PASSWORD, resetPasswordSaga),\n  takeEvery(CHANGE_USER_PASSWORD, changePasswordSaga),\n];\n\nfunction* requestPasswordResetSaga(action) {\n  const userEmailObject = action.userEmailObject;\n  yield put({\n    type: REQUEST_USER_PASSWORD_RESET_SENDING,\n  });\n  if (userEmailObject && userEmailObject.userEmail) {\n    try {\n      const passwordResetRequestResponse =\n        yield UserHelper.RequestPasswordReset(userEmailObject);\n\n      if (passwordResetRequestResponse) {\n        if (!passwordResetRequestResponse.error) {\n          yield put({\n            type: REQUEST_USER_PASSWORD_RESET_SUCCESS,\n          });\n        } else {\n          yield put({\n            type: REQUEST_USER_PASSWORD_RESET_ERROR,\n            error: passwordResetRequestResponse.error.message,\n          });\n        }\n      } else {\n        yield put({\n          type: REQUEST_USER_PASSWORD_RESET_ERROR,\n          error: 'No response from server',\n        });\n      }\n    } catch (error) {\n      yield put({\n        type: REQUEST_USER_PASSWORD_RESET_ERROR,\n        error: error && error.toString(),\n      });\n    }\n  } else {\n    yield put({\n      type: REQUEST_USER_PASSWORD_RESET_ERROR,\n      error: 'Invalid object',\n    });\n  }\n}\n\nfunction* resetPasswordSaga(action) {\n  const resetPasswordObject = action.resetPasswordObject;\n\n  yield put({\n    type: RESET_USER_PASSWORD_SENDING,\n  });\n  if (resetPasswordObject.token && resetPasswordObject.password) {\n    try {\n      const resetPasswordResponse = yield UserHelper.ResetPassword(\n        resetPasswordObject\n      );\n\n      if (resetPasswordResponse) {\n        if (!resetPasswordResponse.error) {\n          yield put({\n            type: RESET_USER_PASSWORD_SUCCESS,\n          });\n        } else {\n          const error =\n            (resetPasswordResponse.error.data &&\n              resetPasswordResponse.error.data.length > 0 &&\n              resetPasswordResponse.error.data[0].message) ||\n            resetPasswordResponse.error.message;\n          yield put({\n            type: RESET_USER_PASSWORD_ERROR,\n            error,\n          });\n        }\n      } else {\n        yield put({\n          type: RESET_USER_PASSWORD_ERROR,\n          error: 'No response from server',\n        });\n      }\n    } catch (error) {\n      yield put({\n        type: RESET_USER_PASSWORD_ERROR,\n        error: error && error.toString(),\n      });\n    }\n  } else {\n    yield put({\n      type: RESET_USER_PASSWORD_ERROR,\n      error: 'Invalid object',\n    });\n  }\n}\n\n// userId\n// existingPassword\n// newPassword\nfunction* changePasswordSaga(action) {\n  if (\n    !action ||\n    !action.userId ||\n    !action.currentPassword ||\n    !action.newPassword\n  ) {\n    yield put({\n      type: CHANGE_USER_PASSWORD_ERROR,\n      error: 'Invalid action object sent to changePassword saga',\n    });\n    return;\n  }\n\n  try {\n    const changePasswordObject = {\n      userId: action.userId,\n      existing: action.currentPassword,\n      new: action.newPassword,\n    };\n\n    yield put({\n      type: CHANGE_USER_PASSWORD_SENDING,\n    });\n    const clientCredentials = yield select(selectClientCredentials, 'js');\n    const client = yield getManagementApiClient({ ...clientCredentials });\n\n    const [err, res] = yield to(\n      client.security.users.updatePassword(changePasswordObject)\n    );\n\n    if (err) {\n      const error =\n        (err?.data?.data?.length > 0 && err.data.data[0].message) ||\n        err?.data?.message;\n      yield put({\n        type: CHANGE_USER_PASSWORD_ERROR,\n        error,\n      });\n      return;\n    }\n\n    // // eslint-disable-next-line no-console\n    // console.log(changePasswordObject);\n    // // eslint-disable-next-line no-console\n    // console.log(userCredentialsObject);\n    yield put({\n      type: CHANGE_USER_PASSWORD_SUCCESS,\n    });\n  } catch (error) {\n    yield put({\n      type: CHANGE_USER_PASSWORD_ERROR,\n      error: error && error.toString(),\n    });\n  }\n}\n","import { loginSagas } from './login';\nimport { registerSagas } from './register';\nimport { resetPasswordSagas } from './resetPassword';\n\nexport const userSagas = [\n  ...loginSagas,\n  ...registerSagas,\n  ...resetPasswordSagas,\n];\n","// index.js\nimport { all } from 'redux-saga/effects';\nimport { navigationSagas } from './navigation';\nimport { routingSagas } from '~/routing/redux/sagas';\nimport { userSagas } from '~/user/redux/sagas';\n\nexport default function (featureSagas = []) {\n  return function* rootSaga() {\n    const subSagas = [...routingSagas, ...navigationSagas, ...userSagas];\n    yield all([...subSagas, ...featureSagas]);\n  };\n}\n","const servers = SERVERS; /* global SERVERS */\nconst alias = servers.alias.toLowerCase();\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\nconst projects = PROJECTS; /* global PROJECTS */\n\n// return a projectId via the request hostname\nconst pickProject = (hostname, query) => {\n  // if localhost we can only infer via a querystring, and take your word for it\n  if (hostname == 'localhost') {\n    return (query && query.p) || projects[0].id;\n  }\n\n  // if hostname is the actual public uri we can return the first project from the list\n  if (hostname == publicUri) {\n    return projects[0].id;\n  }\n\n  let project = 'unknown';\n\n  // // go through all the defined projects\n  // Object.entries(projects).map(([, p]) => {\n  const p = projects[0];\n\n  // check if we're accessing via the project's public uri\n  if (hostname.includes(p.publicUri)) project = p.id;\n\n  // the url structure is different for website (we don't prefix)\n  if (p.id.startsWith('website')) {\n    // check for internal and external hostnames\n    // we check live and preview distinctly so our rule does not clash with\n    // hostnames that use a project prefix\n    if (\n      hostname.includes(`live-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`live.${alias}.contensis.cloud`) ||\n      hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`preview.${alias}.contensis.cloud`)\n    )\n      project = p.id;\n  } else {\n    // check for internal and external hostnames, prefixed with the projectId\n    if (\n      hostname.includes(`${p.id.toLowerCase()}-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\n    )\n      project = p.id;\n  }\n  // });\n  return project === 'unknown' ? p.id : project;\n};\n\nexport default pickProject;\n","import React from 'react';\nimport { hot } from 'react-hot-loader';\nimport { AppRootProps } from '~/models';\nimport { RouteLoader } from '../routing';\n\nconst AppRoot = (props: AppRootProps) => {\n  return <RouteLoader {...props} />;\n};\n\nexport default hot(module)(AppRoot);\n"],"names":["selectedHistory","window","createBrowserHistory","createMemoryHistory","history","options","browserHistory","navigationSagas","takeEvery","GET_NODE_TREE","ensureNodeTreeSaga","action","api","language","project","versionStatus","treeDepth","state","select","hasNavigationTree","nodes","getRootNode","depth","put","type","SET_NODE_TREE","GET_NODE_TREE_ERROR","ex","log","error","toString","sys","contentTypeId","dataFormat","filename","id","includeInSearch","slug","uri","Fields","entryTitle","entryDescription","keywords","wildcard","fieldExpression","field","value","operator","weight","Array","isArray","equalToOrIn","Op","defaultExpressions","equalTo","arr","length","in","routeEntryByFieldsQuery","fields","fieldLinkDepths","query","Query","routingSagas","SET_NAVIGATION_PATH","getRouteSaga","SET_ROUTE","setRouteSaga","payload","method","args","path","entry","_staticRoute$route","_staticRoute$route$pa","_staticRoute$route2","_staticRoute$route2$p","_staticRoute$route3","_staticRoute$route3$p","_appsays","_appsays2","_appsays3","_pathNode2","_pathNode2$entry","_pathNode2$entry$sys","_pathNode3","_pathNode3$entry","_pathNode3$entry$sys","withEvents","routes","ContentTypeMappings","staticRoute","ssr","route","injectRedux","call","reduxInjectorSaga","pathNode","ancestors","children","siblings","contentTypeMapping","appsays","requireLogin","onRouteLoad","staticRouteLinkDepth","params","linkDepth","staticRouteFields","staticRouteFieldLinkDepths","entryLinkDepth","undefined","entryFieldLinkDepths","setContentTypeLimits","find","ct","nodeOptions","routeEntry","selectRouteEntry","routeNode","selectCurrentNode","currentPath","deliveryApiStatus","selectVersionStatus","selectCurrentProject","isPreview","startsWith","defaultLang","customRouting","fetchNode","statePath","refetchNode","_staticRoute$route4","UPDATE_LOADING_STATE","isLoading","setRouteEntry","selectCurrentAncestors","selectCurrentSiblings","splitPath","split","entryGuid","previewEntry","getClient","entries","get","_pathNode","_pathNode$entry","_pathNode$entry$sys","nodeError","to","getNode","entryFields","includes","status","userLoggedIn","handleRequiresLoginSaga","LoginHelper","GetAccessDeniedRoute","do500","_payload$items","findContentTypeMapping","search","items","resolveCurrentNodeOrdinates","resolvedContentTypeMapping","onRouteLoaded","preventScrollTop","scrollTo","_staticRoute$route5","_staticRoute$route5$f","_appsays4","entryMapper","do404","e","stack","apiCall","doNavigation","customNavigation","getAncestors","info","childrenDepth","childrenOptions","getChildren","getSiblings","_nodeOptions$siblings","_nodeOptions$siblings2","_nodeOptions$siblings3","includeInMenu","isTreeLoaded","tree","getNodeTree","loadAncestors","loadChildren","loadSiblings","loadTree","nodeWithChildren","all","node","notFound","remapEntry","entrySys","ContensisEntryId","currentEntryId","selectRouteEntryEntryId","currentEntryLang","selectRouteEntryLanguage","mappedEntry","selectMappedEntry","mapRouteEntry","SET_ENTRY","SET_ANCESTORS","SET_SIBLINGS","clientReloadHitServer","stateEntry","location","reload","isError","statusCode","injectorFn","key","reducer","saga","reduxInjector","registerSagas","REGISTER_USER","registerSaga","REGISTER_USER_SUCCESS","redirectSaga","user","mappers","requestBody","request","response","fetch","headers","Accept","body","JSON","stringify","ok","mappedResponse","responseBody","json","REGISTER_USER_FAILED","message","errorResponse","statusText","currentQs","queryParams","selectCurrentSearch","redirectUri","redirect_uri","redirect","setRoute","PAP_URL","USER_ENVS_URI","USER_RESEND_VERIFICATION_URI","USER_REQUEST_PASSWORD_RESET_URI","USER_RESET_PASSWORD_URI","USER_ENVS_URL","BASE_OPTIONS","UserHelper","GetUsersEnvironments","securityToken","ResendUserVerification","userEmail","RequestPasswordReset","userEmailObject","ResetPassword","resetPasswordObject","url","err","then","data","catch","resetPasswordSagas","REQUEST_USER_PASSWORD_RESET","requestPasswordResetSaga","RESET_USER_PASSWORD","resetPasswordSaga","CHANGE_USER_PASSWORD","changePasswordSaga","REQUEST_USER_PASSWORD_RESET_SENDING","passwordResetRequestResponse","REQUEST_USER_PASSWORD_RESET_SUCCESS","REQUEST_USER_PASSWORD_RESET_ERROR","RESET_USER_PASSWORD_SENDING","token","password","resetPasswordResponse","RESET_USER_PASSWORD_SUCCESS","RESET_USER_PASSWORD_ERROR","userId","currentPassword","newPassword","CHANGE_USER_PASSWORD_ERROR","changePasswordObject","existing","new","CHANGE_USER_PASSWORD_SENDING","clientCredentials","selectClientCredentials","client","getManagementApiClient","res","security","users","updatePassword","_err$data","_err$data$data","_err$data2","CHANGE_USER_PASSWORD_SUCCESS","userSagas","loginSagas","featureSagas","rootSaga","subSagas","servers","SERVERS","alias","toLowerCase","publicUri","PUBLIC_URI","projects","PROJECTS","pickProject","hostname","p","AppRoot","props","React","createElement","RouteLoader"],"mappings":"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"}