{"version":3,"file":"ChangePassword.container-88aa9b51.js","sources":["../src/routing/util/find-contenttype-mapping.ts","../src/user/transformations/mapClientCredentials.ts","../src/user/util/ContensisManagementApi.ts","../src/user/util/OidcUserManager.ts","../src/user/util/LoginHelper.class.ts","../src/user/redux/sagas/login.ts","../src/user/redux/actions.ts","../src/user/hooks/useLogin.ts","../src/user/containers/Login.container.js","../src/user/hooks/useRegistration.js","../src/user/containers/Registration.container.js","../src/user/hooks/useForgotPassword.js","../src/user/containers/ForgotPassword.container.js","../src/user/hooks/useChangePassword.js","../src/user/containers/ChangePassword.container.js"],"sourcesContent":["import { ContentTypeMapping } from '~/models';\n\nexport const findContentTypeMapping = (\n  ContentTypeMappings: ContentTypeMapping[],\n  contentTypeId: string\n) => ContentTypeMappings.find(ct => ct.contentTypeID === contentTypeId);\n","import { Client } from 'contensis-management-api';\nimport { mapJson } from '~/util/json-mapper';\nimport { ManagementApiClientCredentials } from '../util/ContensisManagementApi';\n\nconst clientCredentials = {\n  bearerToken: 'bearerToken',\n  bearerTokenExpiryDate: ({ bearerTokenExpiryDate }) =>\n    bearerTokenExpiryDate.toISOString(),\n  refreshToken: 'refreshToken',\n  refreshTokenExpiryDate: ({ refreshTokenExpiryDate }) =>\n    refreshTokenExpiryDate.toISOString(),\n  contensisClassicToken: 'contensisClassicToken',\n};\nexport default (obj: Client) =>\n  mapJson(obj, clientCredentials) as ManagementApiClientCredentials;\n","export type ManagementApiClientCredentials = {\n  bearerToken?: string;\n  bearerTokenExpiryDate?: Date;\n  refreshToken?: string;\n  refreshTokenExpiryDate?: Date;\n  contensisClassicToken?: string;\n  username?: string;\n  password?: string;\n};\n\nexport const getManagementApiClient = async ({\n  bearerToken,\n  bearerTokenExpiryDate,\n  refreshToken,\n  refreshTokenExpiryDate,\n  contensisClassicToken,\n  username,\n  password,\n}: ManagementApiClientCredentials) => {\n  const rootUrl = SERVERS.cms || SERVERS.api; /* global SERVERS */\n  const projectId = PROJECTS[0].id; /* global PROJECTS */\n\n  let config = {};\n  if (refreshToken) {\n    config = {\n      clientType: 'contensis_classic_refresh_token',\n      clientDetails: {\n        refreshToken,\n      },\n    };\n  } else {\n    config = {\n      clientType: 'contensis_classic',\n      clientDetails: {\n        username,\n        password,\n      },\n    };\n  }\n\n  let { Client } = await import('contensis-management-api');\n\n  if (typeof window === 'undefined') {\n    const { UniversalClient } = await import('contensis-management-api');\n    Client = UniversalClient;\n  }\n\n  const client = Client.create({\n    ...config,\n    projectId,\n    rootUrl,\n  });\n\n  if (bearerToken) client.bearerToken = bearerToken;\n  if (bearerTokenExpiryDate)\n    client.bearerTokenExpiryDate = bearerTokenExpiryDate;\n  if (refreshToken) client.refreshToken = refreshToken;\n  if (refreshTokenExpiryDate)\n    client.refreshTokenExpiryDate = refreshTokenExpiryDate;\n  if (contensisClassicToken)\n    (client as any).contensisClassicToken = contensisClassicToken;\n\n  return client;\n};\n","import { UserManagerSettings } from 'oidc-client';\n\nconst context = (\n  typeof window != 'undefined' ? window : global\n) as typeof globalThis & {\n  WSFED_LOGIN: string;\n};\n\nconst requireOidc =\n  process.env.NODE_ENV === 'development'\n    ? WSFED_LOGIN === 'true' /* global WSFED_LOGIN */\n    : context.WSFED_LOGIN === 'true';\n\nconst servers = SERVERS; /* global SERVERS */\n\nexport const userManagerConfig =\n  typeof window !== 'undefined'\n    ? {\n        authority: `${servers.cms}/authenticate/`,\n        client_id: 'WebsiteAdfsClient',\n        redirect_uri: window.location.toString(),\n        post_logout_redirect_uri: window.location.toString(),\n        response_type: 'id_token',\n        scope: 'openid',\n        filterProtocolClaims: false,\n      }\n    : {};\n\nexport const createUserManager = async (config: UserManagerSettings) => {\n  if (typeof window !== 'undefined' && requireOidc) {\n    try {\n      const { UserManager } = await import(\n        /* webpackChunkName: \"oidcclient\" */ 'oidc-client'\n      );\n      return new UserManager(config);\n    } catch (e) {\n      console.error('Exception in createUserManager: ', e);\n    }\n  } else return;\n};\n","import { to } from 'await-to-js';\n\nimport {\n  ManagementApiClientCredentials,\n  getManagementApiClient,\n} from './ContensisManagementApi';\n\nimport mapClientCredentials from '../transformations/mapClientCredentials';\nimport { createUserManager, userManagerConfig } from './OidcUserManager';\nimport { LOGIN_COOKIE, REFRESH_TOKEN_COOKIE } from './CookieConstants';\nimport { AuthenticationState, UserWithGroups } from '../state';\nimport { Client } from 'contensis-management-api';\nimport { CookieHelper } from './CookieHelper.class';\n\nconst context = (\n  typeof window != 'undefined' ? window : global\n) as typeof globalThis & {\n  WSFED_LOGIN: any;\n};\n\nexport class LoginHelper {\n  static CMS_URL = SERVERS.cms /* global SERVERS */;\n  static WSFED_LOGIN =\n    process.env.NODE_ENV === 'development'\n      ? WSFED_LOGIN === 'true' /* global WSFED_LOGIN */\n      : context.WSFED_LOGIN === 'true';\n  static LOGIN_ROUTE = '/account/login';\n  static ACCESS_DENIED_ROUTE = '/account/access-denied';\n\n  cookies: CookieHelper;\n\n  constructor(cookies?: CookieHelper) {\n    this.cookies = cookies || new CookieHelper();\n  }\n\n  static withCookies = (cookieHelper: CookieHelper) =>\n    new LoginHelper(cookieHelper);\n\n  static GetUserDetails = async (\n    client: Client\n  ): Promise<[Error | null, UserWithGroups | undefined]> => {\n    const [userError, user] = await to(client.security.users.getCurrent());\n    if (user && user.id) {\n      const [groupsError, groupsResult] = await to(\n        client.security.users.getUserGroups({\n          userId: user.id,\n          includeInherited: true,\n          pageOptions: { pageSize: 100 },\n        })\n      );\n      // Set groups attribute in user object to be the items\n      // array from the getUserGroups result\n      if (groupsResult && groupsResult.items)\n        (user as UserWithGroups).groups = groupsResult.items;\n\n      // If groups call fails then log the error but allow the user to login still\n      // eslint-disable-next-line no-console\n      if (groupsError) console.log(groupsError);\n    }\n    return [userError, user as UserWithGroups];\n  };\n\n  static ClientRedirectToHome(location?: Location) {\n    if (typeof window != 'undefined') {\n      let url = '/';\n      if (location) {\n        const { search, hash } = location;\n        url = search ? `${url}${search}` : url;\n        url = hash ? `${url}${hash}` : url;\n      }\n      window.location.href = url;\n    }\n  }\n\n  static async ClientRedirectToSignInPage(redirectPath?: string) {\n    if (typeof location === 'undefined') return;\n    if (LoginHelper.WSFED_LOGIN) {\n      await LoginHelper.WsFedLogout();\n      await LoginHelper.WsFedLogin();\n    } else {\n      // Standard Contensis Login\n      let url = LoginHelper.LOGIN_ROUTE;\n      if (typeof redirectPath === 'string')\n        url = `${url}?redirect_uri=${redirectPath}`;\n      if (\n        typeof location !== 'undefined' &&\n        redirectPath !== LoginHelper.LOGIN_ROUTE\n      )\n        location.replace(url);\n    }\n  }\n\n  static GetAccessDeniedRoute(originalPath) {\n    let url = LoginHelper.ACCESS_DENIED_ROUTE;\n    if (originalPath !== url && typeof originalPath === 'string')\n      url = `${url}?original_uri=${originalPath}`;\n    return url;\n  }\n\n  static ClientRedirectToAccessDeniedPage(originalPath) {\n    if (typeof location !== 'undefined')\n      location.href = LoginHelper.GetAccessDeniedRoute(originalPath);\n  }\n\n  static ClientRedirectToPath(redirectPath) {\n    if (typeof redirectPath === 'string') {\n      if (typeof location !== 'undefined') window.location.href = redirectPath;\n    } else LoginHelper.ClientRedirectToHome();\n  }\n\n  static async WsFedLogin(redirectUri?: string) {\n    const userManager = await createUserManager(userManagerConfig);\n    userManager?.signinRedirect({\n      scope: 'openid',\n      response_type: 'id_token',\n      redirect_uri: redirectUri || window.location.toString(),\n    });\n  }\n\n  static RemoveSecurityTokenQuery() {\n    const params = new URLSearchParams(window.location.search);\n    if (params.has('securitytoken') || params.has('securityToken')) {\n      params.delete('securitytoken');\n      params.delete('securityToken');\n      window.location.href = `${window.location.pathname}${\n        params.toString() ? `?${params}` : ''\n      }`;\n    }\n  }\n\n  static async WsFedLogout(redirectPath?: string) {\n    await fetch(\n      `${LoginHelper.CMS_URL}/authenticate/logout?jsonResponseRequired=true`,\n      {\n        credentials: 'include',\n      }\n    );\n    if (redirectPath) {\n      window.location.href = redirectPath;\n    } else {\n      // Explicitly check and remove any stale\n      // security token that may be in the query string\n      LoginHelper.RemoveSecurityTokenQuery();\n    }\n  }\n\n  static async GetCredentialsForSecurityToken(securityToken: string) {\n    const [error, response] = await to(\n      fetch(`${LoginHelper.CMS_URL}/REST/Contensis/Security/IsAuthenticated`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          securityToken: encodeURIComponent(securityToken),\n        }),\n      })\n    );\n    if (error) return [{ message: 'Failed to fetch credentials' }];\n    if (response.ok) {\n      const [parseError, body] = await to(response.json());\n      if (parseError) return [parseError];\n\n      const { LogonResult, ApplicationData = [] } = body;\n      if (LogonResult !== 0) {\n        console.info(`Security token is invalid - LogonResult: ${LogonResult}`);\n        return [\n          { message: 'Security token is invalid', data: ApplicationData },\n        ];\n      }\n      if (ApplicationData.length > 0) {\n        let refreshToken;\n        ApplicationData.forEach(item => {\n          if (item.Key === 'ContensisSecurityRefreshToken')\n            refreshToken = item.Value;\n        });\n        if (!refreshToken) {\n          return [\n            {\n              message:\n                'Fetch credentials: Unable to find ContensisSecurityRefreshToken',\n            },\n          ];\n        }\n        return [undefined, refreshToken];\n      } else {\n        return [\n          {\n            message:\n              'Fetch credentials: Unable to find ContensisSecurityRefreshToken',\n          },\n        ];\n      }\n    } else {\n      return [\n        {\n          message: `Fetch credentials error: ${response.status} ${response.statusText}`,\n        },\n      ];\n    }\n  }\n\n  // static isZengentiStaff(email) {\n  //   const emailRefs = ['@zengenti', '@contensis'];\n\n  //   return emailRefs.some(emailRef => {\n  //     if (email.includes(emailRef)) {\n  //       return true;\n  //     }\n  //   });\n  // }\n\n  SetLoginCookies({\n    contensisClassicToken,\n    refreshToken,\n  }: {\n    contensisClassicToken?: string;\n    refreshToken?: string;\n  }) {\n    console.info(\n      'SetLoginCookies:',\n      LOGIN_COOKIE,\n      contensisClassicToken,\n      REFRESH_TOKEN_COOKIE,\n      refreshToken\n    );\n\n    if (contensisClassicToken)\n      this.cookies.SetCookie(LOGIN_COOKIE, contensisClassicToken);\n\n    if (refreshToken)\n      this.cookies.SetCookie(REFRESH_TOKEN_COOKIE, refreshToken);\n  }\n\n  GetCachedCredentials() {\n    return {\n      bearerToken: null,\n      bearerTokenExpiryDate: null,\n      refreshToken: this.cookies.GetCookie(REFRESH_TOKEN_COOKIE),\n      refreshTokenExpiryDate: null,\n      contensisClassicToken: this.cookies.GetCookie(LOGIN_COOKIE),\n      securityToken: null,\n    };\n  }\n\n  ClearCachedCredentials() {\n    this.cookies.DeleteCookie(LOGIN_COOKIE);\n    this.cookies.DeleteCookie(REFRESH_TOKEN_COOKIE);\n\n    if (LoginHelper.WSFED_LOGIN && typeof window !== 'undefined') {\n      // remove any oidc keys left over in localStorage\n      const { localStorage } = window;\n      const keys: string[] = [];\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (typeof key === 'string' && key.startsWith('oidc.')) keys.push(key);\n      }\n      keys.forEach(key => localStorage.removeItem(key));\n    }\n  }\n\n  async LoginUser({\n    username,\n    password,\n    clientCredentials,\n  }: {\n    username?: string;\n    password?: string;\n    clientCredentials?: ManagementApiClientCredentials;\n  }) {\n    let credentials = clientCredentials;\n    let authenticationState: AuthenticationState = {\n      clientCredentials: null,\n      isAuthenticated: false,\n      isAuthenticationError: false,\n      isError: false,\n    };\n    let transientClient: Client | null = null;\n    let user;\n\n    if (username && password) {\n      // Get a management client with username and password\n      transientClient = await getManagementApiClient({\n        username,\n        password,\n      });\n\n      // Ensure the client has requested a bearer token\n      const [loginError, clientBearerToken] = await to(\n        transientClient.ensureBearerToken()\n      );\n\n      // Problem getting token with username and password\n      if (loginError) {\n        authenticationState = {\n          clientCredentials: null,\n          errorMessage: loginError.message || null,\n          isAuthenticated: false,\n          isAuthenticationError: loginError.name.includes(\n            'ContensisAuthenticationError'\n          ),\n          isError: true,\n        };\n        this.ClearCachedCredentials();\n      }\n\n      // Got a token using username and password\n      if (clientBearerToken) {\n        // Set credentials so we can continue to GetUserDetails\n        const clientCredentials = mapClientCredentials(transientClient);\n        this.SetLoginCookies(clientCredentials);\n        authenticationState = {\n          clientCredentials,\n          isAuthenticated: true,\n          isAuthenticationError: false,\n          isError: false,\n        };\n        credentials = clientCredentials;\n      }\n    }\n\n    // If we have credentials supplied by a successful username and password login\n    // or clientCredentials supplied in the options argument we can continue to\n    // fetch the user's details\n    if (credentials) {\n      const client =\n        transientClient || (await getManagementApiClient(credentials));\n      const [error, userDetails] = await LoginHelper.GetUserDetails(client);\n\n      if (error) {\n        authenticationState = {\n          clientCredentials: null,\n          errorMessage: error.message,\n          isAuthenticated: false,\n          isAuthenticationError: false,\n          isError: true,\n        };\n        this.ClearCachedCredentials();\n      } else {\n        // Ensure we get latest refreshToken and contensisClassicToken from the latest client\n        const latestCredentials = mapClientCredentials(client);\n        this.SetLoginCookies(latestCredentials);\n\n        user = userDetails;\n        authenticationState = {\n          clientCredentials: latestCredentials,\n          isAuthenticated: true,\n          isAuthenticationError: false,\n          isError: false,\n        };\n      }\n    }\n\n    return { authenticationState, user };\n  }\n\n  LogoutUser(redirectPath?: string) {\n    this.ClearCachedCredentials();\n    if (LoginHelper.WSFED_LOGIN) {\n      LoginHelper.WsFedLogout(redirectPath);\n    } else {\n      if (redirectPath) LoginHelper.ClientRedirectToPath(redirectPath);\n      else LoginHelper.ClientRedirectToSignInPage();\n    }\n  }\n}\n","import { takeEvery, select, put, call } from 'redux-saga/effects';\nimport {\n  SET_AUTHENTICATION_STATE,\n  LOGIN_USER,\n  LOGOUT_USER,\n  VALIDATE_USER,\n} from '../types';\nimport {\n  selectUserIsAuthenticated,\n  selectClientCredentials,\n  selectUserGroups,\n} from '../selectors';\n\nimport { setRoute } from '~/routing/redux/actions';\nimport { selectCurrentSearch } from '~/routing/redux/selectors';\nimport { findContentTypeMapping } from '~/routing/util/find-contenttype-mapping';\n\nimport mapClientCredentials from '~/user/transformations/mapClientCredentials';\n\nimport { getManagementApiClient } from '~/user/util/ContensisManagementApi';\nimport { LoginHelper } from '~/user/util/LoginHelper.class';\nimport { matchUserGroup } from '~/user/util/matchGroups';\nimport { queryParams } from '~/util/navigation';\n\nexport const loginSagas = [\n  takeEvery(LOGIN_USER, loginUserSaga),\n  takeEvery(LOGOUT_USER, logoutUserSaga),\n  takeEvery(VALIDATE_USER, validateUserSaga),\n  takeEvery(SET_AUTHENTICATION_STATE, redirectAfterSuccessfulLoginSaga),\n];\n\nexport function* handleRequiresLoginSaga(action: any) {\n  const {\n    cookies,\n    entry,\n    path,\n    requireLogin,\n    routes: { ContentTypeMappings },\n    staticRoute,\n  } = action;\n  let userLoggedIn = yield select(selectUserIsAuthenticated);\n\n  // Check for a securityToken in querystring\n  const currentQs = queryParams(yield select(selectCurrentSearch));\n  const securityToken = currentQs.securityToken || currentQs.securitytoken;\n\n  // Check if any of the defined routes have \"requireLogin\" attribute\n  const { requireLogin: authRoute } = (staticRoute && staticRoute.route) || {};\n  const { requireLogin: authContentType } =\n    (entry &&\n      findContentTypeMapping(ContentTypeMappings, entry?.sys?.contentTypeId)) ||\n    {};\n\n  // If requireLogin, authRoute or authContentType has been specified as an\n  // array of groups we can merge all the arrays and match on any group supplied\n  const routeRequiresGroups = [\n    ...((Array.isArray(authContentType) && authContentType) || []),\n    ...((Array.isArray(authRoute) && authRoute) || []),\n    ...((Array.isArray(requireLogin) && requireLogin) || []),\n  ];\n  const routeRequiresLogin = !!authContentType || !!authRoute || !!requireLogin;\n\n  if (!userLoggedIn) {\n    // If cookies or securityToken are found on any route change\n    // always validate and login the user\n    if (routeRequiresLogin) {\n      console.info(`Route requires login: ${path}`);\n      // If routeRequiresLogin do a blocking call that returns userLoggedIn\n      userLoggedIn = yield call(validateUserSaga, {\n        cookies,\n        securityToken,\n      });\n      console.info(`User logged in: ${userLoggedIn}`);\n    }\n    // otherwise do a non blocking put to handle validation in the background\n    else yield put({ type: VALIDATE_USER, cookies, securityToken });\n  }\n\n  if (routeRequiresLogin) {\n    // If a security token is in the querystring and we are not already\n    // logged in something is wrong and we won't bother going on another redirect loop\n    if (!userLoggedIn && !securityToken) {\n      LoginHelper.ClientRedirectToSignInPage(action.location.pathname);\n    } else if (routeRequiresGroups.length > 0) {\n      const userGroups = yield select(selectUserGroups, 'js');\n      const groupMatch = matchUserGroup(userGroups, routeRequiresGroups);\n\n      if (!groupMatch)\n        LoginHelper.ClientRedirectToAccessDeniedPage(action.location.pathname);\n    }\n  }\n\n  return userLoggedIn;\n}\n\nfunction* validateUserSaga({ cookies, securityToken }: any) {\n  const login = LoginHelper.withCookies(cookies);\n  // Check for refreshToken in cookies\n  let clientCredentials = login.GetCachedCredentials();\n\n  if (\n    securityToken ||\n    clientCredentials.securityToken ||\n    clientCredentials.refreshToken\n  ) {\n    // We only attempt to validate the user if one of the stored\n    // tokens are found, in this case we set loading state manually\n    // so we don't need to set and unset loading if there are no stored\n    yield put({\n      type: SET_AUTHENTICATION_STATE,\n      authenticationState: {\n        isLoading: true,\n      },\n    });\n    // If we have just a security token we will call a CMS endpoint\n    // and provide us with a RefreshToken cookie we can use during login\n    if (\n      securityToken ||\n      (clientCredentials.securityToken && !clientCredentials.refreshToken)\n    ) {\n      const [error, refreshToken] =\n        yield LoginHelper.GetCredentialsForSecurityToken(\n          securityToken || clientCredentials.securityToken\n        );\n      if (refreshToken) {\n        // Set cookies and reload values\n        login.SetLoginCookies({\n          contensisClassicToken: securityToken,\n          refreshToken,\n        });\n        clientCredentials = login.GetCachedCredentials();\n      }\n      if (error) {\n        login.ClearCachedCredentials();\n        yield put({\n          type: SET_AUTHENTICATION_STATE,\n          authenticationState: {\n            isError: true,\n            errorMessage:\n              error?.message ||\n              (error && 'toString' in error && error.toString()),\n          },\n        });\n      }\n    }\n\n    // Log the user in if a refreshToken is found\n    if (clientCredentials.refreshToken) {\n      console.info(\n        `Login user with refreshToken ${clientCredentials.refreshToken}`\n      );\n      yield call(loginUserSaga, {\n        clientCredentials,\n        cookies: login.cookies,\n      });\n    }\n  }\n\n  // Tell any callers have we successfully logged in?\n  return yield select(selectUserIsAuthenticated);\n}\n\nfunction* loginUserSaga(action: any = {}) {\n  const { username, password, clientCredentials, cookies } = action;\n  const login = LoginHelper.withCookies(cookies);\n\n  // If a WSFED_LOGIN site has dispatched the loginUser action\n  // just redirect them to the Identity Provider sign in\n  if (action.type === LOGIN_USER && LoginHelper.WSFED_LOGIN)\n    LoginHelper.ClientRedirectToSignInPage();\n\n  const { authenticationState, user } = yield login.LoginUser({\n    username,\n    password,\n    clientCredentials,\n  });\n\n  yield put({\n    type: SET_AUTHENTICATION_STATE,\n    authenticationState,\n    user,\n  });\n}\n\nconst removeHostnamePart = path => {\n  // eslint-disable-next-line no-console\n  console.log(path);\n  const relativePath = '/' + path.split('/').splice(3).join('/');\n  // eslint-disable-next-line no-console\n  console.log(relativePath);\n  return relativePath;\n};\n\nfunction* redirectAfterSuccessfulLoginSaga() {\n  const isLoggedIn = yield select(selectUserIsAuthenticated);\n  const { redirect_uri: redirectPath, ReturnURL: assetRedirectPath } =\n    queryParams(yield select(selectCurrentSearch));\n\n  if (isLoggedIn && assetRedirectPath && typeof window != 'undefined') {\n    const path = removeHostnamePart(assetRedirectPath);\n    // This has to be a hard href to get the app to\n    // leave React and hit the server for the IIS hosted assets\n    window.location.href = path;\n    // yield put(setRoute(path)); // does not work in this scenario\n  } else if (isLoggedIn && redirectPath) {\n    yield put(setRoute(redirectPath));\n  }\n}\n\nfunction* logoutUserSaga({ redirectPath, cookies }: any) {\n  yield put({\n    type: SET_AUTHENTICATION_STATE,\n    user: null,\n  });\n  yield LoginHelper.withCookies(cookies).LogoutUser(redirectPath);\n}\n\nexport function* refreshSecurityToken() {\n  const clientCredentials = yield select(selectClientCredentials, 'js');\n  if (Object.keys(clientCredentials).length > 0) {\n    const client = yield getManagementApiClient(clientCredentials);\n    yield client.authenticate();\n\n    yield put({\n      type: SET_AUTHENTICATION_STATE,\n      authenticationState: {\n        clientCredentials: mapClientCredentials(client),\n      },\n    });\n  }\n}\n","import { action } from '~/redux/util';\nimport {\n  CHANGE_USER_PASSWORD,\n  LOGIN_USER,\n  LOGOUT_USER,\n  REGISTER_USER,\n  REQUEST_USER_PASSWORD_RESET,\n  RESET_USER_PASSWORD,\n} from './types';\nimport { CookieHelper } from '../util/CookieHelper.class';\n\nexport const loginUser = (\n  username: string,\n  password: string,\n  cookies?: CookieHelper\n) => action(LOGIN_USER, { username, password, cookies });\n\nexport const logoutUser = (redirectPath?: string, cookies?: CookieHelper) =>\n  action(LOGOUT_USER, { redirectPath, cookies });\n\nexport const registerUser = (user, mappers) =>\n  action(REGISTER_USER, {\n    user,\n    mappers,\n  });\n\nexport const requestPasswordReset = userEmailObject =>\n  action(REQUEST_USER_PASSWORD_RESET, { userEmailObject });\n\nexport const resetPassword = resetPasswordObject =>\n  action(RESET_USER_PASSWORD, { resetPasswordObject });\n\nexport const changePassword = (userId, currentPassword, newPassword) =>\n  action(CHANGE_USER_PASSWORD, { userId, currentPassword, newPassword });\n","import { useCookies } from 'react-cookie';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loginUser, logoutUser } from '../redux/actions';\nimport {\n  selectUser,\n  selectUserIsAuthenticationError,\n  selectUserIsError,\n  selectUserErrorMessage,\n  selectUserIsAuthenticated,\n  selectUserIsLoading,\n} from '../redux/selectors';\nimport { CookieHelper } from '../util/CookieHelper.class';\n\nconst useLogin = () => {\n  const cookies = new CookieHelper(...useCookies());\n\n  const dispatch = useDispatch();\n  const select = useSelector;\n\n  return {\n    loginUser: (username: string, password: string) =>\n      dispatch(loginUser(username, password, cookies)),\n    logoutUser: (redirectPath?: string) =>\n      dispatch(logoutUser(redirectPath, cookies)),\n    errorMessage: select(selectUserErrorMessage),\n    isAuthenticated: select(selectUserIsAuthenticated),\n    isAuthenticationError: select(selectUserIsAuthenticationError),\n    isError: select(selectUserIsError),\n    isLoading: select(selectUserIsLoading),\n    user: select(selectUser),\n    // DEPRECATED: authenticationError is deprecated use isAuthenticationError instead\n    authenticationError: select(selectUserIsAuthenticationError),\n    // DEPRECATED: authenticationErrorMessage is deprecated use errorMessage instead\n    authenticationErrorMessage: select(selectUserErrorMessage),\n    // DEPRECATED: error is deprecated use isError instead\n    error: select(selectUserIsError),\n  };\n};\n\nexport default useLogin;\n","import useLogin from '../hooks/useLogin';\nimport { toJS } from '~/util/ToJs';\n\nconst LoginContainer = ({ children, ...props }) => {\n  const userProps = useLogin(props);\n  return children(userProps);\n};\n\nLoginContainer.propTypes = {};\n\nexport default toJS(LoginContainer);\n","import { useDispatch, useSelector } from 'react-redux';\nimport { registerUser } from '../redux/actions';\nimport {\n  selectUserRegistration,\n  selectUserRegistrationError,\n  selectUserRegistrationIsLoading,\n  selectUserRegistrationIsSuccess,\n} from '../redux/selectors';\n\nconst useRegistration = () => {\n  const dispatch = useDispatch();\n  const select = useSelector;\n\n  return {\n    registerUser: (user, mappers) => dispatch(registerUser(user, mappers)),\n    error: select(selectUserRegistrationError),\n    isLoading: select(selectUserRegistrationIsLoading),\n    isSuccess: select(selectUserRegistrationIsSuccess),\n    user: select(selectUserRegistration),\n  };\n};\n\nexport default useRegistration;\n","import useRegistration from '../hooks/useRegistration';\nimport { toJS } from '~/util/ToJs';\n\nconst RegistrationContainer = ({ children, ...props }) => {\n  const userProps = useRegistration(props);\n  return children(userProps);\n};\n\nRegistrationContainer.propTypes = {};\n\nexport default toJS(RegistrationContainer);\n","import { useDispatch, useSelector } from 'react-redux';\nimport { requestPasswordReset, resetPassword } from '../redux/actions';\nimport {\n  selectPasswordResetRequestError,\n  selectPasswordResetRequestSending,\n  selectPasswordResetRequestSent,\n  selectResetPasswordSending,\n  selectResetPasswordSent,\n  selectResetPasswordError,\n} from '../redux/selectors';\nimport { selectCurrentSearch } from '~/routing/redux/selectors';\n\nconst useForgotPassword = () => {\n  const dispatch = useDispatch();\n  const select = useSelector;\n\n  return {\n    isLoading: select(selectPasswordResetRequestSending),\n    isSuccess: select(selectPasswordResetRequestSent),\n    error: select(selectPasswordResetRequestError),\n    requestPasswordReset: userEmailObject =>\n      dispatch(requestPasswordReset(userEmailObject)),\n\n    setNewPassword: {\n      queryString: select(selectCurrentSearch),\n      isLoading: select(selectResetPasswordSending),\n      isSuccess: select(selectResetPasswordSent),\n      error: select(selectResetPasswordError),\n      submit: resetPasswordObject =>\n        dispatch(resetPassword(resetPasswordObject)),\n    },\n  };\n};\n\nexport default useForgotPassword;\n","import useForgotPassword from '../hooks/useForgotPassword';\nimport { toJS } from '~/util/ToJs';\n\nconst ForgotPasswordContainer = ({ children, ...props }) => {\n  const userProps = useForgotPassword(props);\n  return children(userProps);\n};\n\nForgotPasswordContainer.propTypes = {};\n\nexport default toJS(ForgotPasswordContainer);\n","import { useDispatch, useSelector } from 'react-redux';\nimport { changePassword } from '../redux/actions';\nimport {\n  selectChangePasswordSending,\n  selectChangePasswordSent,\n  selectChangePasswordError,\n  selectUserIsAuthenticated,\n  selectUserGuid,\n} from '../redux/selectors';\n\nconst useChangePassword = () => {\n  const dispatch = useDispatch();\n  const select = useSelector;\n\n  return {\n    isLoading: select(selectChangePasswordSending),\n    isSuccess: select(selectChangePasswordSent),\n    userId: select(selectUserGuid),\n    isLoggedIn: select(selectUserIsAuthenticated),\n    error: select(selectChangePasswordError),\n    changePassword: (userId, currentPassword, newPassword) =>\n      dispatch(changePassword(userId, currentPassword, newPassword)),\n  };\n};\n\nexport default useChangePassword;\n","import useChangePassword from '../hooks/useChangePassword';\nimport { toJS } from '~/util/ToJs';\n\nconst ChangePasswordContainer = ({ children, ...props }) => {\n  const userProps = useChangePassword(props);\n  return children(userProps);\n};\n\nChangePasswordContainer.propTypes = {};\n\nexport default toJS(ChangePasswordContainer);\n"],"names":["findContentTypeMapping","ContentTypeMappings","contentTypeId","find","ct","contentTypeID","clientCredentials","bearerToken","bearerTokenExpiryDate","toISOString","refreshToken","refreshTokenExpiryDate","contensisClassicToken","obj","mapJson","getManagementApiClient","username","password","rootUrl","SERVERS","cms","api","projectId","PROJECTS","id","config","clientType","clientDetails","Client","window","UniversalClient","client","create","context","global","requireOidc","process","env","NODE_ENV","WSFED_LOGIN","servers","userManagerConfig","authority","client_id","redirect_uri","location","toString","post_logout_redirect_uri","response_type","scope","filterProtocolClaims","createUserManager","UserManager","e","console","error","LoginHelper","constructor","cookies","CookieHelper","ClientRedirectToHome","url","search","hash","href","ClientRedirectToSignInPage","redirectPath","WsFedLogout","WsFedLogin","LOGIN_ROUTE","replace","GetAccessDeniedRoute","originalPath","ACCESS_DENIED_ROUTE","ClientRedirectToAccessDeniedPage","ClientRedirectToPath","redirectUri","userManager","signinRedirect","RemoveSecurityTokenQuery","params","URLSearchParams","has","delete","pathname","fetch","CMS_URL","credentials","GetCredentialsForSecurityToken","securityToken","response","to","method","headers","Accept","body","JSON","stringify","encodeURIComponent","message","ok","parseError","json","LogonResult","ApplicationData","info","data","length","forEach","item","Key","Value","undefined","status","statusText","SetLoginCookies","LOGIN_COOKIE","REFRESH_TOKEN_COOKIE","SetCookie","GetCachedCredentials","GetCookie","ClearCachedCredentials","DeleteCookie","localStorage","keys","i","key","startsWith","push","removeItem","LoginUser","authenticationState","isAuthenticated","isAuthenticationError","isError","transientClient","user","loginError","clientBearerToken","ensureBearerToken","errorMessage","name","includes","mapClientCredentials","userDetails","GetUserDetails","latestCredentials","LogoutUser","withCookies","cookieHelper","userError","security","users","getCurrent","groupsError","groupsResult","getUserGroups","userId","includeInherited","pageOptions","pageSize","items","groups","log","loginSagas","takeEvery","LOGIN_USER","loginUserSaga","LOGOUT_USER","logoutUserSaga","VALIDATE_USER","validateUserSaga","SET_AUTHENTICATION_STATE","redirectAfterSuccessfulLoginSaga","handleRequiresLoginSaga","action","_entry$sys","entry","path","requireLogin","routes","staticRoute","userLoggedIn","select","selectUserIsAuthenticated","currentQs","queryParams","selectCurrentSearch","securitytoken","authRoute","route","authContentType","sys","routeRequiresGroups","Array","isArray","routeRequiresLogin","call","put","type","userGroups","selectUserGroups","groupMatch","matchUserGroup","login","isLoading","removeHostnamePart","relativePath","split","splice","join","isLoggedIn","ReturnURL","assetRedirectPath","setRoute","refreshSecurityToken","selectClientCredentials","Object","authenticate","loginUser","logoutUser","registerUser","mappers","REGISTER_USER","requestPasswordReset","userEmailObject","REQUEST_USER_PASSWORD_RESET","resetPassword","resetPasswordObject","RESET_USER_PASSWORD","changePassword","currentPassword","newPassword","CHANGE_USER_PASSWORD","useLogin","useCookies","dispatch","useDispatch","useSelector","selectUserErrorMessage","selectUserIsAuthenticationError","selectUserIsError","selectUserIsLoading","selectUser","authenticationError","authenticationErrorMessage","LoginContainer","children","props","userProps","propTypes","toJS","useRegistration","selectUserRegistrationError","selectUserRegistrationIsLoading","isSuccess","selectUserRegistrationIsSuccess","selectUserRegistration","RegistrationContainer","useForgotPassword","selectPasswordResetRequestSending","selectPasswordResetRequestSent","selectPasswordResetRequestError","setNewPassword","queryString","selectResetPasswordSending","selectResetPasswordSent","selectResetPasswordError","submit","ForgotPasswordContainer","useChangePassword","selectChangePasswordSending","selectChangePasswordSent","selectUserGuid","selectChangePasswordError","ChangePasswordContainer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAEaA,sBAAsB,GAAGA,CACpCC,mBAAyC,EACzCC,aAAqB,KAClBD,mBAAmB,CAACE,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACC,aAAa,KAAKH,aAAa;;ACDtE,MAAMI,iBAAiB,GAAG;AACxBC,EAAAA,WAAW,EAAE,aAAa;AAC1BC,EAAAA,qBAAqB,EAAEA,CAAC;AAAEA,IAAAA,qBAAAA;AAAsB,GAAC,KAC/CA,qBAAqB,CAACC,WAAW,EAAE;AACrCC,EAAAA,YAAY,EAAE,cAAc;AAC5BC,EAAAA,sBAAsB,EAAEA,CAAC;AAAEA,IAAAA,sBAAAA;AAAuB,GAAC,KACjDA,sBAAsB,CAACF,WAAW,EAAE;AACtCG,EAAAA,qBAAqB,EAAE,uBAAA;AACzB,CAAC,CAAA;AACD,2BAAA,CAAgBC,GAAW,IACzBC,2BAAO,CAACD,GAAG,EAAEP,iBAAiB,CAAmC;;ACJtDS,MAAAA,sBAAsB,GAAG,OAAO;EAC3CR,WAAW;EACXC,qBAAqB;EACrBE,YAAY;EACZC,sBAAsB;EACtBC,qBAAqB;EACrBI,QAAQ;AACRC,EAAAA,QAAAA;AAC8B,CAAC,KAAK;EACpC,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,IAAID,OAAO,CAACE,GAAG,CAAC;EAC3C,MAAMC,SAAS,GAAGC,QAAQ,CAAC,CAAC,CAAC,CAACC,EAAE,CAAC;;EAEjC,IAAIC,MAAM,GAAG,EAAE,CAAA;AACf,EAAA,IAAIf,YAAY,EAAE;AAChBe,IAAAA,MAAM,GAAG;AACPC,MAAAA,UAAU,EAAE,iCAAiC;AAC7CC,MAAAA,aAAa,EAAE;AACbjB,QAAAA,YAAAA;AACF,OAAA;KACD,CAAA;AACH,GAAC,MAAM;AACLe,IAAAA,MAAM,GAAG;AACPC,MAAAA,UAAU,EAAE,mBAAmB;AAC/BC,MAAAA,aAAa,EAAE;QACbX,QAAQ;AACRC,QAAAA,QAAAA;AACF,OAAA;KACD,CAAA;AACH,GAAA;EAEA,IAAI;AAAEW,IAAAA,MAAAA;AAAO,GAAC,GAAG,MAAM,mFAAO,0BAA0B,MAAC,CAAA;AAEzD,EAAA,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;IACjC,MAAM;AAAEC,MAAAA,eAAAA;AAAgB,KAAC,GAAG,MAAM,mFAAO,0BAA0B,MAAC,CAAA;AACpEF,IAAAA,MAAM,GAAGE,eAAe,CAAA;AAC1B,GAAA;AAEA,EAAA,MAAMC,MAAM,GAAGH,MAAM,CAACI,MAAM,CAAC;AAC3B,IAAA,GAAGP,MAAM;IACTH,SAAS;AACTJ,IAAAA,OAAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,IAAIX,WAAW,EAAEwB,MAAM,CAACxB,WAAW,GAAGA,WAAW,CAAA;AACjD,EAAA,IAAIC,qBAAqB,EACvBuB,MAAM,CAACvB,qBAAqB,GAAGA,qBAAqB,CAAA;AACtD,EAAA,IAAIE,YAAY,EAAEqB,MAAM,CAACrB,YAAY,GAAGA,YAAY,CAAA;AACpD,EAAA,IAAIC,sBAAsB,EACxBoB,MAAM,CAACpB,sBAAsB,GAAGA,sBAAsB,CAAA;AACxD,EAAA,IAAIC,qBAAqB,EACtBmB,MAAM,CAASnB,qBAAqB,GAAGA,qBAAqB,CAAA;AAE/D,EAAA,OAAOmB,MAAM,CAAA;AACf;;AC7DA,MAAME,SAAO,GACX,OAAOJ,MAAM,IAAI,WAAW,GAAGA,MAAM,GAAGK,MAGzC,CAAA;AAED,MAAMC,WAAW,GACfC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAClCC,WAAW,KAAK,MAAM,4BACtBN,SAAO,CAACM,WAAW,KAAK,MAAM,CAAA;AAEpC,MAAMC,OAAO,GAAGrB,OAAO,CAAC;;AAEjB,MAAMsB,iBAAiB,GAC5B,OAAOZ,MAAM,KAAK,WAAW,GACzB;AACEa,EAAAA,SAAS,EAAG,CAAA,EAAEF,OAAO,CAACpB,GAAI,CAAe,cAAA,CAAA;AACzCuB,EAAAA,SAAS,EAAE,mBAAmB;AAC9BC,EAAAA,YAAY,EAAEf,MAAM,CAACgB,QAAQ,CAACC,QAAQ,EAAE;AACxCC,EAAAA,wBAAwB,EAAElB,MAAM,CAACgB,QAAQ,CAACC,QAAQ,EAAE;AACpDE,EAAAA,aAAa,EAAE,UAAU;AACzBC,EAAAA,KAAK,EAAE,QAAQ;AACfC,EAAAA,oBAAoB,EAAE,KAAA;AACxB,CAAC,GACD,EAAE,CAAA;AAED,MAAMC,iBAAiB,GAAG,MAAO1B,MAA2B,IAAK;AACtE,EAAA,IAAI,OAAOI,MAAM,KAAK,WAAW,IAAIM,WAAW,EAAE;IAChD,IAAI;MACF,MAAM;AAAEiB,QAAAA,WAAAA;AAAY,OAAC,GAAG,MAAM,mFAC5B,qCAAqC,aAAa,MACnD,CAAA;AACD,MAAA,OAAO,IAAIA,WAAW,CAAC3B,MAAM,CAAC,CAAA;KAC/B,CAAC,OAAO4B,CAAC,EAAE;AACVC,MAAAA,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEF,CAAC,CAAC,CAAA;AACtD,KAAA;AACF,GAAC,MAAM,OAAA;AACT,CAAC;;ACzBD,MAAMpB,OAAO,GACX,OAAOJ,MAAM,IAAI,WAAW,GAAGA,MAAM,GAAGK,MAGzC,CAAA;AAEM,MAAMsB,WAAW,CAAC;EAWvBC,WAAWA,CAACC,OAAsB,EAAE;AAAA,IAAA,IAAA,CAFpCA,OAAO,GAAA,KAAA,CAAA,CAAA;AAGL,IAAA,IAAI,CAACA,OAAO,GAAGA,OAAO,IAAI,IAAIC,+BAAY,EAAE,CAAA;AAC9C,GAAA;EA6BA,OAAOC,oBAAoBA,CAACf,QAAmB,EAAE;AAC/C,IAAA,IAAI,OAAOhB,MAAM,IAAI,WAAW,EAAE;MAChC,IAAIgC,GAAG,GAAG,GAAG,CAAA;AACb,MAAA,IAAIhB,QAAQ,EAAE;QACZ,MAAM;UAAEiB,MAAM;AAAEC,UAAAA,IAAAA;AAAK,SAAC,GAAGlB,QAAQ,CAAA;QACjCgB,GAAG,GAAGC,MAAM,GAAI,CAAA,EAAED,GAAI,CAAEC,EAAAA,MAAO,CAAC,CAAA,GAAGD,GAAG,CAAA;QACtCA,GAAG,GAAGE,IAAI,GAAI,CAAA,EAAEF,GAAI,CAAEE,EAAAA,IAAK,CAAC,CAAA,GAAGF,GAAG,CAAA;AACpC,OAAA;AACAhC,MAAAA,MAAM,CAACgB,QAAQ,CAACmB,IAAI,GAAGH,GAAG,CAAA;AAC5B,KAAA;AACF,GAAA;EAEA,aAAaI,0BAA0BA,CAACC,YAAqB,EAAE;AAC7D,IAAA,IAAI,OAAOrB,QAAQ,KAAK,WAAW,EAAE,OAAA;IACrC,IAAIW,WAAW,CAACjB,WAAW,EAAE;MAC3B,MAAMiB,WAAW,CAACW,WAAW,EAAE,CAAA;MAC/B,MAAMX,WAAW,CAACY,UAAU,EAAE,CAAA;AAChC,KAAC,MAAM;AACL;AACA,MAAA,IAAIP,GAAG,GAAGL,WAAW,CAACa,WAAW,CAAA;MACjC,IAAI,OAAOH,YAAY,KAAK,QAAQ,EAClCL,GAAG,GAAI,CAAEA,EAAAA,GAAI,CAAgBK,cAAAA,EAAAA,YAAa,CAAC,CAAA,CAAA;AAC7C,MAAA,IACE,OAAOrB,QAAQ,KAAK,WAAW,IAC/BqB,YAAY,KAAKV,WAAW,CAACa,WAAW,EAExCxB,QAAQ,CAACyB,OAAO,CAACT,GAAG,CAAC,CAAA;AACzB,KAAA;AACF,GAAA;EAEA,OAAOU,oBAAoBA,CAACC,YAAY,EAAE;AACxC,IAAA,IAAIX,GAAG,GAAGL,WAAW,CAACiB,mBAAmB,CAAA;AACzC,IAAA,IAAID,YAAY,KAAKX,GAAG,IAAI,OAAOW,YAAY,KAAK,QAAQ,EAC1DX,GAAG,GAAI,CAAA,EAAEA,GAAI,CAAA,cAAA,EAAgBW,YAAa,CAAC,CAAA,CAAA;AAC7C,IAAA,OAAOX,GAAG,CAAA;AACZ,GAAA;EAEA,OAAOa,gCAAgCA,CAACF,YAAY,EAAE;AACpD,IAAA,IAAI,OAAO3B,QAAQ,KAAK,WAAW,EACjCA,QAAQ,CAACmB,IAAI,GAAGR,WAAW,CAACe,oBAAoB,CAACC,YAAY,CAAC,CAAA;AAClE,GAAA;EAEA,OAAOG,oBAAoBA,CAACT,YAAY,EAAE;AACxC,IAAA,IAAI,OAAOA,YAAY,KAAK,QAAQ,EAAE;MACpC,IAAI,OAAOrB,QAAQ,KAAK,WAAW,EAAEhB,MAAM,CAACgB,QAAQ,CAACmB,IAAI,GAAGE,YAAY,CAAA;AAC1E,KAAC,MAAMV,WAAW,CAACI,oBAAoB,EAAE,CAAA;AAC3C,GAAA;EAEA,aAAaQ,UAAUA,CAACQ,WAAoB,EAAE;AAC5C,IAAA,MAAMC,WAAW,GAAG,MAAM1B,iBAAiB,CAACV,iBAAiB,CAAC,CAAA;AAC9DoC,IAAAA,WAAW,aAAXA,WAAW,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAXA,WAAW,CAAEC,cAAc,CAAC;AAC1B7B,MAAAA,KAAK,EAAE,QAAQ;AACfD,MAAAA,aAAa,EAAE,UAAU;AACzBJ,MAAAA,YAAY,EAAEgC,WAAW,IAAI/C,MAAM,CAACgB,QAAQ,CAACC,QAAQ,EAAA;AACvD,KAAC,CAAC,CAAA;AACJ,GAAA;EAEA,OAAOiC,wBAAwBA,GAAG;IAChC,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACpD,MAAM,CAACgB,QAAQ,CAACiB,MAAM,CAAC,CAAA;AAC1D,IAAA,IAAIkB,MAAM,CAACE,GAAG,CAAC,eAAe,CAAC,IAAIF,MAAM,CAACE,GAAG,CAAC,eAAe,CAAC,EAAE;AAC9DF,MAAAA,MAAM,CAACG,MAAM,CAAC,eAAe,CAAC,CAAA;AAC9BH,MAAAA,MAAM,CAACG,MAAM,CAAC,eAAe,CAAC,CAAA;MAC9BtD,MAAM,CAACgB,QAAQ,CAACmB,IAAI,GAAI,CAAEnC,EAAAA,MAAM,CAACgB,QAAQ,CAACuC,QAAS,GACjDJ,MAAM,CAAClC,QAAQ,EAAE,GAAI,IAAGkC,MAAO,CAAA,CAAC,GAAG,EACpC,CAAC,CAAA,CAAA;AACJ,KAAA;AACF,GAAA;EAEA,aAAab,WAAWA,CAACD,YAAqB,EAAE;AAC9C,IAAA,MAAMmB,KAAK,CACR,CAAA,EAAE7B,WAAW,CAAC8B,OAAQ,gDAA+C,EACtE;AACEC,MAAAA,WAAW,EAAE,SAAA;AACf,KAAC,CACF,CAAA;AACD,IAAA,IAAIrB,YAAY,EAAE;AAChBrC,MAAAA,MAAM,CAACgB,QAAQ,CAACmB,IAAI,GAAGE,YAAY,CAAA;AACrC,KAAC,MAAM;AACL;AACA;MACAV,WAAW,CAACuB,wBAAwB,EAAE,CAAA;AACxC,KAAA;AACF,GAAA;EAEA,aAAaS,8BAA8BA,CAACC,aAAqB,EAAE;AACjE,IAAA,MAAM,CAAClC,KAAK,EAAEmC,QAAQ,CAAC,GAAG,MAAMC,KAAE,CAChCN,KAAK,CAAE,CAAE7B,EAAAA,WAAW,CAAC8B,OAAQ,0CAAyC,EAAE;AACtEM,MAAAA,MAAM,EAAE,MAAM;AACdC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBAAkB;AAC1B,QAAA,cAAc,EAAE,kBAAA;OACjB;AACDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBR,aAAa,EAAES,kBAAkB,CAACT,aAAa,CAAA;OAChD,CAAA;AACH,KAAC,CAAC,CACH,CAAA;IACD,IAAIlC,KAAK,EAAE,OAAO,CAAC;AAAE4C,MAAAA,OAAO,EAAE,6BAAA;AAA8B,KAAC,CAAC,CAAA;IAC9D,IAAIT,QAAQ,CAACU,EAAE,EAAE;AACf,MAAA,MAAM,CAACC,UAAU,EAAEN,IAAI,CAAC,GAAG,MAAMJ,KAAE,CAACD,QAAQ,CAACY,IAAI,EAAE,CAAC,CAAA;AACpD,MAAA,IAAID,UAAU,EAAE,OAAO,CAACA,UAAU,CAAC,CAAA;MAEnC,MAAM;QAAEE,WAAW;AAAEC,QAAAA,eAAe,GAAG,EAAA;AAAG,OAAC,GAAGT,IAAI,CAAA;MAClD,IAAIQ,WAAW,KAAK,CAAC,EAAE;AACrBjD,QAAAA,OAAO,CAACmD,IAAI,CAAE,CAA2CF,yCAAAA,EAAAA,WAAY,EAAC,CAAC,CAAA;AACvE,QAAA,OAAO,CACL;AAAEJ,UAAAA,OAAO,EAAE,2BAA2B;AAAEO,UAAAA,IAAI,EAAEF,eAAAA;AAAgB,SAAC,CAChE,CAAA;AACH,OAAA;AACA,MAAA,IAAIA,eAAe,CAACG,MAAM,GAAG,CAAC,EAAE;AAC9B,QAAA,IAAIjG,YAAY,CAAA;AAChB8F,QAAAA,eAAe,CAACI,OAAO,CAACC,IAAI,IAAI;UAC9B,IAAIA,IAAI,CAACC,GAAG,KAAK,+BAA+B,EAC9CpG,YAAY,GAAGmG,IAAI,CAACE,KAAK,CAAA;AAC7B,SAAC,CAAC,CAAA;QACF,IAAI,CAACrG,YAAY,EAAE;AACjB,UAAA,OAAO,CACL;AACEyF,YAAAA,OAAO,EACL,iEAAA;AACJ,WAAC,CACF,CAAA;AACH,SAAA;AACA,QAAA,OAAO,CAACa,SAAS,EAAEtG,YAAY,CAAC,CAAA;AAClC,OAAC,MAAM;AACL,QAAA,OAAO,CACL;AACEyF,UAAAA,OAAO,EACL,iEAAA;AACJ,SAAC,CACF,CAAA;AACH,OAAA;AACF,KAAC,MAAM;AACL,MAAA,OAAO,CACL;QACEA,OAAO,EAAG,4BAA2BT,QAAQ,CAACuB,MAAO,CAAGvB,CAAAA,EAAAA,QAAQ,CAACwB,UAAW,CAAA,CAAA;AAC9E,OAAC,CACF,CAAA;AACH,KAAA;AACF,GAAA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEAC,EAAAA,eAAeA,CAAC;IACdvG,qBAAqB;AACrBF,IAAAA,YAAAA;AAIF,GAAC,EAAE;AACD4C,IAAAA,OAAO,CAACmD,IAAI,CACV,kBAAkB,EAClBW,+BAAY,EACZxG,qBAAqB,EACrByG,uCAAoB,EACpB3G,YAAY,CACb,CAAA;IAED,IAAIE,qBAAqB,EACvB,IAAI,CAAC8C,OAAO,CAAC4D,SAAS,CAACF,+BAAY,EAAExG,qBAAqB,CAAC,CAAA;IAE7D,IAAIF,YAAY,EACd,IAAI,CAACgD,OAAO,CAAC4D,SAAS,CAACD,uCAAoB,EAAE3G,YAAY,CAAC,CAAA;AAC9D,GAAA;AAEA6G,EAAAA,oBAAoBA,GAAG;IACrB,OAAO;AACLhH,MAAAA,WAAW,EAAE,IAAI;AACjBC,MAAAA,qBAAqB,EAAE,IAAI;MAC3BE,YAAY,EAAE,IAAI,CAACgD,OAAO,CAAC8D,SAAS,CAACH,uCAAoB,CAAC;AAC1D1G,MAAAA,sBAAsB,EAAE,IAAI;MAC5BC,qBAAqB,EAAE,IAAI,CAAC8C,OAAO,CAAC8D,SAAS,CAACJ,+BAAY,CAAC;AAC3D3B,MAAAA,aAAa,EAAE,IAAA;KAChB,CAAA;AACH,GAAA;AAEAgC,EAAAA,sBAAsBA,GAAG;AACvB,IAAA,IAAI,CAAC/D,OAAO,CAACgE,YAAY,CAACN,+BAAY,CAAC,CAAA;AACvC,IAAA,IAAI,CAAC1D,OAAO,CAACgE,YAAY,CAACL,uCAAoB,CAAC,CAAA;IAE/C,IAAI7D,WAAW,CAACjB,WAAW,IAAI,OAAOV,MAAM,KAAK,WAAW,EAAE;AAC5D;MACA,MAAM;AAAE8F,QAAAA,YAAAA;AAAa,OAAC,GAAG9F,MAAM,CAAA;MAC/B,MAAM+F,IAAc,GAAG,EAAE,CAAA;AACzB,MAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,YAAY,CAAChB,MAAM,EAAEkB,CAAC,EAAE,EAAE;AAC5C,QAAA,MAAMC,GAAG,GAAGH,YAAY,CAACG,GAAG,CAACD,CAAC,CAAC,CAAA;AAC/B,QAAA,IAAI,OAAOC,GAAG,KAAK,QAAQ,IAAIA,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,EAAEH,IAAI,CAACI,IAAI,CAACF,GAAG,CAAC,CAAA;AACxE,OAAA;MACAF,IAAI,CAAChB,OAAO,CAACkB,GAAG,IAAIH,YAAY,CAACM,UAAU,CAACH,GAAG,CAAC,CAAC,CAAA;AACnD,KAAA;AACF,GAAA;AAEA,EAAA,MAAMI,SAASA,CAAC;IACdlH,QAAQ;IACRC,QAAQ;AACRX,IAAAA,iBAAAA;AAKF,GAAC,EAAE;IACD,IAAIiF,WAAW,GAAGjF,iBAAiB,CAAA;AACnC,IAAA,IAAI6H,mBAAwC,GAAG;AAC7C7H,MAAAA,iBAAiB,EAAE,IAAI;AACvB8H,MAAAA,eAAe,EAAE,KAAK;AACtBC,MAAAA,qBAAqB,EAAE,KAAK;AAC5BC,MAAAA,OAAO,EAAE,KAAA;KACV,CAAA;IACD,IAAIC,eAA8B,GAAG,IAAI,CAAA;AACzC,IAAA,IAAIC,IAAI,CAAA;IAER,IAAIxH,QAAQ,IAAIC,QAAQ,EAAE;AACxB;MACAsH,eAAe,GAAG,MAAMxH,sBAAsB,CAAC;QAC7CC,QAAQ;AACRC,QAAAA,QAAAA;AACF,OAAC,CAAC,CAAA;;AAEF;AACA,MAAA,MAAM,CAACwH,UAAU,EAAEC,iBAAiB,CAAC,GAAG,MAAM/C,KAAE,CAC9C4C,eAAe,CAACI,iBAAiB,EAAE,CACpC,CAAA;;AAED;AACA,MAAA,IAAIF,UAAU,EAAE;AACdN,QAAAA,mBAAmB,GAAG;AACpB7H,UAAAA,iBAAiB,EAAE,IAAI;AACvBsI,UAAAA,YAAY,EAAEH,UAAU,CAACtC,OAAO,IAAI,IAAI;AACxCiC,UAAAA,eAAe,EAAE,KAAK;UACtBC,qBAAqB,EAAEI,UAAU,CAACI,IAAI,CAACC,QAAQ,CAC7C,8BAA8B,CAC/B;AACDR,UAAAA,OAAO,EAAE,IAAA;SACV,CAAA;QACD,IAAI,CAACb,sBAAsB,EAAE,CAAA;AAC/B,OAAA;;AAEA;AACA,MAAA,IAAIiB,iBAAiB,EAAE;AACrB;AACA,QAAA,MAAMpI,iBAAiB,GAAGyI,oBAAoB,CAACR,eAAe,CAAC,CAAA;AAC/D,QAAA,IAAI,CAACpB,eAAe,CAAC7G,iBAAiB,CAAC,CAAA;AACvC6H,QAAAA,mBAAmB,GAAG;UACpB7H,iBAAiB;AACjB8H,UAAAA,eAAe,EAAE,IAAI;AACrBC,UAAAA,qBAAqB,EAAE,KAAK;AAC5BC,UAAAA,OAAO,EAAE,KAAA;SACV,CAAA;AACD/C,QAAAA,WAAW,GAAGjF,iBAAiB,CAAA;AACjC,OAAA;AACF,KAAA;;AAEA;AACA;AACA;AACA,IAAA,IAAIiF,WAAW,EAAE;MACf,MAAMxD,MAAM,GACVwG,eAAe,KAAK,MAAMxH,sBAAsB,CAACwE,WAAW,CAAC,CAAC,CAAA;AAChE,MAAA,MAAM,CAAChC,KAAK,EAAEyF,WAAW,CAAC,GAAG,MAAMxF,WAAW,CAACyF,cAAc,CAAClH,MAAM,CAAC,CAAA;AAErE,MAAA,IAAIwB,KAAK,EAAE;AACT4E,QAAAA,mBAAmB,GAAG;AACpB7H,UAAAA,iBAAiB,EAAE,IAAI;UACvBsI,YAAY,EAAErF,KAAK,CAAC4C,OAAO;AAC3BiC,UAAAA,eAAe,EAAE,KAAK;AACtBC,UAAAA,qBAAqB,EAAE,KAAK;AAC5BC,UAAAA,OAAO,EAAE,IAAA;SACV,CAAA;QACD,IAAI,CAACb,sBAAsB,EAAE,CAAA;AAC/B,OAAC,MAAM;AACL;AACA,QAAA,MAAMyB,iBAAiB,GAAGH,oBAAoB,CAAChH,MAAM,CAAC,CAAA;AACtD,QAAA,IAAI,CAACoF,eAAe,CAAC+B,iBAAiB,CAAC,CAAA;AAEvCV,QAAAA,IAAI,GAAGQ,WAAW,CAAA;AAClBb,QAAAA,mBAAmB,GAAG;AACpB7H,UAAAA,iBAAiB,EAAE4I,iBAAiB;AACpCd,UAAAA,eAAe,EAAE,IAAI;AACrBC,UAAAA,qBAAqB,EAAE,KAAK;AAC5BC,UAAAA,OAAO,EAAE,KAAA;SACV,CAAA;AACH,OAAA;AACF,KAAA;IAEA,OAAO;MAAEH,mBAAmB;AAAEK,MAAAA,IAAAA;KAAM,CAAA;AACtC,GAAA;EAEAW,UAAUA,CAACjF,YAAqB,EAAE;IAChC,IAAI,CAACuD,sBAAsB,EAAE,CAAA;IAC7B,IAAIjE,WAAW,CAACjB,WAAW,EAAE;AAC3BiB,MAAAA,WAAW,CAACW,WAAW,CAACD,YAAY,CAAC,CAAA;AACvC,KAAC,MAAM;AACL,MAAA,IAAIA,YAAY,EAAEV,WAAW,CAACmB,oBAAoB,CAACT,YAAY,CAAC,CAAC,KAC5DV,WAAW,CAACS,0BAA0B,EAAE,CAAA;AAC/C,KAAA;AACF,GAAA;AACF,CAAA;AA1VaT,WAAW,CACf8B,OAAO,GAAGnE,OAAO,CAACC,GAAG,sBAAC;AADlBoC,WAAW,CAEfjB,WAAW,GAChBH,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAClCC,WAAW,KAAK,MAAM,4BACtBN,OAAO,CAACM,WAAW,KAAK,MAAM,CAAA;AALzBiB,WAAW,CAMfa,WAAW,GAAG,gBAAgB,CAAA;AAN1Bb,WAAW,CAOfiB,mBAAmB,GAAG,wBAAwB,CAAA;AAP1CjB,WAAW,CAef4F,WAAW,GAAIC,YAA0B,IAC9C,IAAI7F,WAAW,CAAC6F,YAAY,CAAC,CAAA;AAhBpB7F,WAAW,CAkBfyF,cAAc,GAAG,MACtBlH,MAAc,IAC0C;AACxD,EAAA,MAAM,CAACuH,SAAS,EAAEd,IAAI,CAAC,GAAG,MAAM7C,KAAE,CAAC5D,MAAM,CAACwH,QAAQ,CAACC,KAAK,CAACC,UAAU,EAAE,CAAC,CAAA;AACtE,EAAA,IAAIjB,IAAI,IAAIA,IAAI,CAAChH,EAAE,EAAE;AACnB,IAAA,MAAM,CAACkI,WAAW,EAAEC,YAAY,CAAC,GAAG,MAAMhE,KAAE,CAC1C5D,MAAM,CAACwH,QAAQ,CAACC,KAAK,CAACI,aAAa,CAAC;MAClCC,MAAM,EAAErB,IAAI,CAAChH,EAAE;AACfsI,MAAAA,gBAAgB,EAAE,IAAI;AACtBC,MAAAA,WAAW,EAAE;AAAEC,QAAAA,QAAQ,EAAE,GAAA;AAAI,OAAA;AAC/B,KAAC,CAAC,CACH,CAAA;AACD;AACA;AACA,IAAA,IAAIL,YAAY,IAAIA,YAAY,CAACM,KAAK,EACnCzB,IAAI,CAAoB0B,MAAM,GAAGP,YAAY,CAACM,KAAK,CAAA;;AAEtD;AACA;AACA,IAAA,IAAIP,WAAW,EAAEpG,OAAO,CAAC6G,GAAG,CAACT,WAAW,CAAC,CAAA;AAC3C,GAAA;AACA,EAAA,OAAO,CAACJ,SAAS,EAAEd,IAAI,CAAmB,CAAA;AAC5C,CAAC;;ACpCU4B,MAAAA,UAAU,GAAG,CACxBC,iBAAS,CAACC,oBAAU,EAAEC,aAAa,CAAC,EACpCF,iBAAS,CAACG,qBAAW,EAAEC,cAAc,CAAC,EACtCJ,iBAAS,CAACK,uBAAa,EAAEC,gBAAgB,CAAC,EAC1CN,iBAAS,CAACO,kCAAwB,EAAEC,gCAAgC,CAAC,EACtE;AAEM,UAAUC,uBAAuBA,CAACC,MAAW,EAAE;AAAA,EAAA,IAAAC,UAAA,CAAA;EACpD,MAAM;IACJtH,OAAO;IACPuH,KAAK;IACLC,IAAI;IACJC,YAAY;AACZC,IAAAA,MAAM,EAAE;AAAEnL,MAAAA,mBAAAA;KAAqB;AAC/BoL,IAAAA,WAAAA;AACF,GAAC,GAAGN,MAAM,CAAA;AACV,EAAA,IAAIO,YAAY,GAAG,MAAMC,cAAM,CAACC,8BAAyB,CAAC,CAAA;;AAE1D;EACA,MAAMC,SAAS,GAAGC,qBAAW,CAAC,MAAMH,cAAM,CAACI,6BAAmB,CAAC,CAAC,CAAA;EAChE,MAAMlG,aAAa,GAAGgG,SAAS,CAAChG,aAAa,IAAIgG,SAAS,CAACG,aAAa,CAAA;;AAExE;EACA,MAAM;AAAET,IAAAA,YAAY,EAAEU,SAAAA;GAAW,GAAIR,WAAW,IAAIA,WAAW,CAACS,KAAK,IAAK,EAAE,CAAA;EAC5E,MAAM;AAAEX,IAAAA,YAAY,EAAEY,eAAAA;GAAiB,GACpCd,KAAK,IACJjL,sBAAsB,CAACC,mBAAmB,EAAEgL,KAAK,KAALA,IAAAA,IAAAA,KAAK,KAAAD,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,UAAA,GAALC,KAAK,CAAEe,GAAG,MAAA,IAAA,IAAAhB,UAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAVA,UAAA,CAAY9K,aAAa,CAAC,IACxE,EAAE,CAAA;;AAEJ;AACA;AACA,EAAA,MAAM+L,mBAAmB,GAAG,CAC1B,IAAKC,KAAK,CAACC,OAAO,CAACJ,eAAe,CAAC,IAAIA,eAAe,IAAK,EAAE,CAAC,EAC9D,IAAKG,KAAK,CAACC,OAAO,CAACN,SAAS,CAAC,IAAIA,SAAS,IAAK,EAAE,CAAC,EAClD,IAAKK,KAAK,CAACC,OAAO,CAAChB,YAAY,CAAC,IAAIA,YAAY,IAAK,EAAE,CAAC,CACzD,CAAA;AACD,EAAA,MAAMiB,kBAAkB,GAAG,CAAC,CAACL,eAAe,IAAI,CAAC,CAACF,SAAS,IAAI,CAAC,CAACV,YAAY,CAAA;EAE7E,IAAI,CAACG,YAAY,EAAE;AACjB;AACA;AACA,IAAA,IAAIc,kBAAkB,EAAE;AACtB9I,MAAAA,OAAO,CAACmD,IAAI,CAAE,CAAwByE,sBAAAA,EAAAA,IAAK,EAAC,CAAC,CAAA;AAC7C;AACAI,MAAAA,YAAY,GAAG,MAAMe,YAAI,CAAC1B,gBAAgB,EAAE;QAC1CjH,OAAO;AACP+B,QAAAA,aAAAA;AACF,OAAC,CAAC,CAAA;AACFnC,MAAAA,OAAO,CAACmD,IAAI,CAAE,CAAkB6E,gBAAAA,EAAAA,YAAa,EAAC,CAAC,CAAA;AACjD,KAAA;AACA;SACK,MAAMgB,WAAG,CAAC;AAAEC,MAAAA,IAAI,EAAE7B,uBAAa;MAAEhH,OAAO;AAAE+B,MAAAA,aAAAA;AAAc,KAAC,CAAC,CAAA;AACjE,GAAA;AAEA,EAAA,IAAI2G,kBAAkB,EAAE;AACtB;AACA;AACA,IAAA,IAAI,CAACd,YAAY,IAAI,CAAC7F,aAAa,EAAE;MACnCjC,WAAW,CAACS,0BAA0B,CAAC8G,MAAM,CAAClI,QAAQ,CAACuC,QAAQ,CAAC,CAAA;AAClE,KAAC,MAAM,IAAI6G,mBAAmB,CAACtF,MAAM,GAAG,CAAC,EAAE;MACzC,MAAM6F,UAAU,GAAG,MAAMjB,cAAM,CAACkB,qBAAgB,EAAE,IAAI,CAAC,CAAA;AACvD,MAAA,MAAMC,UAAU,GAAGC,mBAAc,CAACH,UAAU,EAAEP,mBAAmB,CAAC,CAAA;AAElE,MAAA,IAAI,CAACS,UAAU,EACblJ,WAAW,CAACkB,gCAAgC,CAACqG,MAAM,CAAClI,QAAQ,CAACuC,QAAQ,CAAC,CAAA;AAC1E,KAAA;AACF,GAAA;AAEA,EAAA,OAAOkG,YAAY,CAAA;AACrB,CAAA;AAEA,UAAUX,gBAAgBA,CAAC;EAAEjH,OAAO;AAAE+B,EAAAA,aAAAA;AAAmB,CAAC,EAAE;AAC1D,EAAA,MAAMmH,KAAK,GAAGpJ,WAAW,CAAC4F,WAAW,CAAC1F,OAAO,CAAC,CAAA;AAC9C;AACA,EAAA,IAAIpD,iBAAiB,GAAGsM,KAAK,CAACrF,oBAAoB,EAAE,CAAA;EAEpD,IACE9B,aAAa,IACbnF,iBAAiB,CAACmF,aAAa,IAC/BnF,iBAAiB,CAACI,YAAY,EAC9B;AACA;AACA;AACA;AACA,IAAA,MAAM4L,WAAG,CAAC;AACRC,MAAAA,IAAI,EAAE3B,kCAAwB;AAC9BzC,MAAAA,mBAAmB,EAAE;AACnB0E,QAAAA,SAAS,EAAE,IAAA;AACb,OAAA;AACF,KAAC,CAAC,CAAA;AACF;AACA;IACA,IACEpH,aAAa,IACZnF,iBAAiB,CAACmF,aAAa,IAAI,CAACnF,iBAAiB,CAACI,YAAa,EACpE;AACA,MAAA,MAAM,CAAC6C,KAAK,EAAE7C,YAAY,CAAC,GACzB,MAAM8C,WAAW,CAACgC,8BAA8B,CAC9CC,aAAa,IAAInF,iBAAiB,CAACmF,aAAa,CACjD,CAAA;AACH,MAAA,IAAI/E,YAAY,EAAE;AAChB;QACAkM,KAAK,CAACzF,eAAe,CAAC;AACpBvG,UAAAA,qBAAqB,EAAE6E,aAAa;AACpC/E,UAAAA,YAAAA;AACF,SAAC,CAAC,CAAA;AACFJ,QAAAA,iBAAiB,GAAGsM,KAAK,CAACrF,oBAAoB,EAAE,CAAA;AAClD,OAAA;AACA,MAAA,IAAIhE,KAAK,EAAE;QACTqJ,KAAK,CAACnF,sBAAsB,EAAE,CAAA;AAC9B,QAAA,MAAM6E,WAAG,CAAC;AACRC,UAAAA,IAAI,EAAE3B,kCAAwB;AAC9BzC,UAAAA,mBAAmB,EAAE;AACnBG,YAAAA,OAAO,EAAE,IAAI;AACbM,YAAAA,YAAY,EACV,CAAArF,KAAK,aAALA,KAAK,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAALA,KAAK,CAAE4C,OAAO,KACb5C,KAAK,IAAI,UAAU,IAAIA,KAAK,IAAIA,KAAK,CAACT,QAAQ,EAAA;AACnD,WAAA;AACF,SAAC,CAAC,CAAA;AACJ,OAAA;AACF,KAAA;;AAEA;IACA,IAAIxC,iBAAiB,CAACI,YAAY,EAAE;MAClC4C,OAAO,CAACmD,IAAI,CACT,CAAA,6BAAA,EAA+BnG,iBAAiB,CAACI,YAAa,EAAC,CACjE,CAAA;MACD,MAAM2L,YAAI,CAAC9B,aAAa,EAAE;QACxBjK,iBAAiB;QACjBoD,OAAO,EAAEkJ,KAAK,CAAClJ,OAAAA;AACjB,OAAC,CAAC,CAAA;AACJ,KAAA;AACF,GAAA;;AAEA;AACA,EAAA,OAAO,MAAM6H,cAAM,CAACC,8BAAyB,CAAC,CAAA;AAChD,CAAA;AAEA,UAAUjB,aAAaA,CAACQ,MAAW,GAAG,EAAE,EAAE;EACxC,MAAM;IAAE/J,QAAQ;IAAEC,QAAQ;IAAEX,iBAAiB;AAAEoD,IAAAA,OAAAA;AAAQ,GAAC,GAAGqH,MAAM,CAAA;AACjE,EAAA,MAAM6B,KAAK,GAAGpJ,WAAW,CAAC4F,WAAW,CAAC1F,OAAO,CAAC,CAAA;;AAE9C;AACA;AACA,EAAA,IAAIqH,MAAM,CAACwB,IAAI,KAAKjC,oBAAU,IAAI9G,WAAW,CAACjB,WAAW,EACvDiB,WAAW,CAACS,0BAA0B,EAAE,CAAA;EAE1C,MAAM;IAAEkE,mBAAmB;AAAEK,IAAAA,IAAAA;AAAK,GAAC,GAAG,MAAMoE,KAAK,CAAC1E,SAAS,CAAC;IAC1DlH,QAAQ;IACRC,QAAQ;AACRX,IAAAA,iBAAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,MAAMgM,WAAG,CAAC;AACRC,IAAAA,IAAI,EAAE3B,kCAAwB;IAC9BzC,mBAAmB;AACnBK,IAAAA,IAAAA;AACF,GAAC,CAAC,CAAA;AACJ,CAAA;AAEA,MAAMsE,kBAAkB,GAAG5B,IAAI,IAAI;AACjC;AACA5H,EAAAA,OAAO,CAAC6G,GAAG,CAACe,IAAI,CAAC,CAAA;AACjB,EAAA,MAAM6B,YAAY,GAAG,GAAG,GAAG7B,IAAI,CAAC8B,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAA;AAC9D;AACA5J,EAAAA,OAAO,CAAC6G,GAAG,CAAC4C,YAAY,CAAC,CAAA;AACzB,EAAA,OAAOA,YAAY,CAAA;AACrB,CAAC,CAAA;AAED,UAAUlC,gCAAgCA,GAAG;AAC3C,EAAA,MAAMsC,UAAU,GAAG,MAAM5B,cAAM,CAACC,8BAAyB,CAAC,CAAA;EAC1D,MAAM;AAAE5I,IAAAA,YAAY,EAAEsB,YAAY;AAAEkJ,IAAAA,SAAS,EAAEC,iBAAAA;GAAmB,GAChE3B,qBAAW,CAAC,MAAMH,cAAM,CAACI,6BAAmB,CAAC,CAAC,CAAA;EAEhD,IAAIwB,UAAU,IAAIE,iBAAiB,IAAI,OAAOxL,MAAM,IAAI,WAAW,EAAE;AACnE,IAAA,MAAMqJ,IAAI,GAAG4B,kBAAkB,CAACO,iBAAiB,CAAC,CAAA;AAClD;AACA;AACAxL,IAAAA,MAAM,CAACgB,QAAQ,CAACmB,IAAI,GAAGkH,IAAI,CAAA;AAC3B;AACF,GAAC,MAAM,IAAIiC,UAAU,IAAIjJ,YAAY,EAAE;AACrC,IAAA,MAAMoI,WAAG,CAACgB,kBAAQ,CAACpJ,YAAY,CAAC,CAAC,CAAA;AACnC,GAAA;AACF,CAAA;AAEA,UAAUuG,cAAcA,CAAC;EAAEvG,YAAY;AAAER,EAAAA,OAAAA;AAAa,CAAC,EAAE;AACvD,EAAA,MAAM4I,WAAG,CAAC;AACRC,IAAAA,IAAI,EAAE3B,kCAAwB;AAC9BpC,IAAAA,IAAI,EAAE,IAAA;AACR,GAAC,CAAC,CAAA;EACF,MAAMhF,WAAW,CAAC4F,WAAW,CAAC1F,OAAO,CAAC,CAACyF,UAAU,CAACjF,YAAY,CAAC,CAAA;AACjE,CAAA;AAEO,UAAUqJ,oBAAoBA,GAAG;EACtC,MAAMjN,iBAAiB,GAAG,MAAMiL,cAAM,CAACiC,4BAAuB,EAAE,IAAI,CAAC,CAAA;EACrE,IAAIC,MAAM,CAAC7F,IAAI,CAACtH,iBAAiB,CAAC,CAACqG,MAAM,GAAG,CAAC,EAAE;AAC7C,IAAA,MAAM5E,MAAM,GAAG,MAAMhB,sBAAsB,CAACT,iBAAiB,CAAC,CAAA;IAC9D,MAAMyB,MAAM,CAAC2L,YAAY,EAAE,CAAA;AAE3B,IAAA,MAAMpB,WAAG,CAAC;AACRC,MAAAA,IAAI,EAAE3B,kCAAwB;AAC9BzC,MAAAA,mBAAmB,EAAE;QACnB7H,iBAAiB,EAAEyI,oBAAoB,CAAChH,MAAM,CAAA;AAChD,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AACF;;AC3Na4L,MAAAA,SAAS,GAAGA,CACvB3M,QAAgB,EAChBC,QAAgB,EAChByC,OAAsB,KACnBqH,gBAAM,CAACT,oBAAU,EAAE;EAAEtJ,QAAQ;EAAEC,QAAQ;AAAEyC,EAAAA,OAAAA;AAAQ,CAAC,EAAC;AAEjD,MAAMkK,UAAU,GAAGA,CAAC1J,YAAqB,EAAER,OAAsB,KACtEqH,gBAAM,CAACP,qBAAW,EAAE;EAAEtG,YAAY;AAAER,EAAAA,OAAAA;AAAQ,CAAC,EAAC;AAEzC,MAAMmK,YAAY,GAAGA,CAACrF,IAAI,EAAEsF,OAAO,KACxC/C,gBAAM,CAACgD,uBAAa,EAAE;EACpBvF,IAAI;AACJsF,EAAAA,OAAAA;AACF,CAAC,EAAC;AAEG,MAAME,oBAAoB,GAAGC,eAAe,IACjDlD,gBAAM,CAACmD,qCAA2B,EAAE;AAAED,EAAAA,eAAAA;AAAgB,CAAC,CAAC,CAAA;AAEnD,MAAME,aAAa,GAAGC,mBAAmB,IAC9CrD,gBAAM,CAACsD,6BAAmB,EAAE;AAAED,EAAAA,mBAAAA;AAAoB,CAAC,CAAC,CAAA;AAE/C,MAAME,cAAc,GAAGA,CAACzE,MAAM,EAAE0E,eAAe,EAAEC,WAAW,KACjEzD,gBAAM,CAAC0D,8BAAoB,EAAE;EAAE5E,MAAM;EAAE0E,eAAe;AAAEC,EAAAA,WAAAA;AAAY,CAAC,CAAC;;;;;;;;;;;;ACpBlEE,MAAAA,QAAQ,GAAGA,MAAM;EACrB,MAAMhL,OAAO,GAAG,IAAIC,+BAAY,CAAC,GAAGgL,sBAAU,EAAE,CAAC,CAAA;EAEjD,MAAMC,QAAQ,GAAGC,sBAAW,EAAE,CAAA;EAC9B,MAAMtD,MAAM,GAAGuD,sBAAW,CAAA;EAE1B,OAAO;AACLnB,IAAAA,SAAS,EAAEA,CAAC3M,QAAgB,EAAEC,QAAgB,KAC5C2N,QAAQ,CAACjB,SAAS,CAAC3M,QAAQ,EAAEC,QAAQ,EAAEyC,OAAO,CAAC,CAAC;IAClDkK,UAAU,EAAG1J,YAAqB,IAChC0K,QAAQ,CAAChB,UAAU,CAAC1J,YAAY,EAAER,OAAO,CAAC,CAAC;AAC7CkF,IAAAA,YAAY,EAAE2C,MAAM,CAACwD,2BAAsB,CAAC;AAC5C3G,IAAAA,eAAe,EAAEmD,MAAM,CAACC,8BAAyB,CAAC;AAClDnD,IAAAA,qBAAqB,EAAEkD,MAAM,CAACyD,oCAA+B,CAAC;AAC9D1G,IAAAA,OAAO,EAAEiD,MAAM,CAAC0D,sBAAiB,CAAC;AAClCpC,IAAAA,SAAS,EAAEtB,MAAM,CAAC2D,wBAAmB,CAAC;AACtC1G,IAAAA,IAAI,EAAE+C,MAAM,CAAC4D,eAAU,CAAC;AACxB;AACAC,IAAAA,mBAAmB,EAAE7D,MAAM,CAACyD,oCAA+B,CAAC;AAC5D;AACAK,IAAAA,0BAA0B,EAAE9D,MAAM,CAACwD,2BAAsB,CAAC;AAC1D;IACAxL,KAAK,EAAEgI,MAAM,CAAC0D,sBAAiB,CAAA;GAChC,CAAA;AACH;;AClCA,MAAMK,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAE,GAAGC,KAAAA;AAAM,CAAC,KAAK;AACjD,EAAA,MAAMC,SAAS,GAAGf,QAAQ,CAAM,CAAC,CAAA;EACjC,OAAOa,QAAQ,CAACE,SAAS,CAAC,CAAA;AAC5B,CAAC,CAAA;AAEDH,cAAc,CAACI,SAAS,GAAG,EAAE,CAAA;AAE7B,sBAAeC,SAAI,CAACL,cAAc,CAAC;;ACD7BM,MAAAA,eAAe,GAAGA,MAAM;EAC5B,MAAMhB,QAAQ,GAAGC,sBAAW,EAAE,CAAA;EAC9B,MAAMtD,MAAM,GAAGuD,sBAAW,CAAA;EAE1B,OAAO;AACLjB,IAAAA,YAAY,EAAEA,CAACrF,IAAI,EAAEsF,OAAO,KAAKc,QAAQ,CAACf,YAAY,CAACrF,IAAI,EAAEsF,OAAO,CAAC,CAAC;AACtEvK,IAAAA,KAAK,EAAEgI,MAAM,CAACsE,gCAA2B,CAAC;AAC1ChD,IAAAA,SAAS,EAAEtB,MAAM,CAACuE,oCAA+B,CAAC;AAClDC,IAAAA,SAAS,EAAExE,MAAM,CAACyE,oCAA+B,CAAC;IAClDxH,IAAI,EAAE+C,MAAM,CAAC0E,2BAAsB,CAAA;GACpC,CAAA;AACH;;ACjBA,MAAMC,qBAAqB,GAAGA,CAAC;EAAEX,QAAQ;EAAE,GAAGC,KAAAA;AAAM,CAAC,KAAK;AACxD,EAAA,MAAMC,SAAS,GAAGG,eAAe,CAAM,CAAC,CAAA;EACxC,OAAOL,QAAQ,CAACE,SAAS,CAAC,CAAA;AAC5B,CAAC,CAAA;AAEDS,qBAAqB,CAACR,SAAS,GAAG,EAAE,CAAA;AAEpC,6BAAeC,SAAI,CAACO,qBAAqB,CAAC;;ACEpCC,MAAAA,iBAAiB,GAAGA,MAAM;EAC9B,MAAMvB,QAAQ,GAAGC,sBAAW,EAAE,CAAA;EAC9B,MAAMtD,MAAM,GAAGuD,sBAAW,CAAA;EAE1B,OAAO;AACLjC,IAAAA,SAAS,EAAEtB,MAAM,CAAC6E,sCAAiC,CAAC;AACpDL,IAAAA,SAAS,EAAExE,MAAM,CAAC8E,mCAA8B,CAAC;AACjD9M,IAAAA,KAAK,EAAEgI,MAAM,CAAC+E,oCAA+B,CAAC;IAC9CtC,oBAAoB,EAAEC,eAAe,IACnCW,QAAQ,CAACZ,oBAAoB,CAACC,eAAe,CAAC,CAAC;AAEjDsC,IAAAA,cAAc,EAAE;AACdC,MAAAA,WAAW,EAAEjF,MAAM,CAACI,6BAAmB,CAAC;AACxCkB,MAAAA,SAAS,EAAEtB,MAAM,CAACkF,+BAA0B,CAAC;AAC7CV,MAAAA,SAAS,EAAExE,MAAM,CAACmF,4BAAuB,CAAC;AAC1CnN,MAAAA,KAAK,EAAEgI,MAAM,CAACoF,6BAAwB,CAAC;MACvCC,MAAM,EAAExC,mBAAmB,IACzBQ,QAAQ,CAACT,aAAa,CAACC,mBAAmB,CAAC,CAAA;AAC/C,KAAA;GACD,CAAA;AACH;;AC7BA,MAAMyC,uBAAuB,GAAGA,CAAC;EAAEtB,QAAQ;EAAE,GAAGC,KAAAA;AAAM,CAAC,KAAK;AAC1D,EAAA,MAAMC,SAAS,GAAGU,iBAAiB,CAAM,CAAC,CAAA;EAC1C,OAAOZ,QAAQ,CAACE,SAAS,CAAC,CAAA;AAC5B,CAAC,CAAA;AAEDoB,uBAAuB,CAACnB,SAAS,GAAG,EAAE,CAAA;AAEtC,+BAAeC,SAAI,CAACkB,uBAAuB,CAAC;;ACAtCC,MAAAA,iBAAiB,GAAGA,MAAM;EAC9B,MAAMlC,QAAQ,GAAGC,sBAAW,EAAE,CAAA;EAC9B,MAAMtD,MAAM,GAAGuD,sBAAW,CAAA;EAE1B,OAAO;AACLjC,IAAAA,SAAS,EAAEtB,MAAM,CAACwF,gCAA2B,CAAC;AAC9ChB,IAAAA,SAAS,EAAExE,MAAM,CAACyF,6BAAwB,CAAC;AAC3CnH,IAAAA,MAAM,EAAE0B,MAAM,CAAC0F,mBAAc,CAAC;AAC9B9D,IAAAA,UAAU,EAAE5B,MAAM,CAACC,8BAAyB,CAAC;AAC7CjI,IAAAA,KAAK,EAAEgI,MAAM,CAAC2F,8BAAyB,CAAC;AACxC5C,IAAAA,cAAc,EAAEA,CAACzE,MAAM,EAAE0E,eAAe,EAAEC,WAAW,KACnDI,QAAQ,CAACN,cAAc,CAACzE,MAAM,EAAE0E,eAAe,EAAEC,WAAW,CAAC,CAAA;GAChE,CAAA;AACH;;ACpBA,MAAM2C,uBAAuB,GAAGA,CAAC;EAAE5B,QAAQ;EAAE,GAAGC,KAAAA;AAAM,CAAC,KAAK;AAC1D,EAAA,MAAMC,SAAS,GAAGqB,iBAAiB,CAAM,CAAC,CAAA;EAC1C,OAAOvB,QAAQ,CAACE,SAAS,CAAC,CAAA;AAC5B,CAAC,CAAA;AAED0B,uBAAuB,CAACzB,SAAS,GAAG,EAAE,CAAA;AAEtC,+BAAeC,SAAI,CAACwB,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;"}